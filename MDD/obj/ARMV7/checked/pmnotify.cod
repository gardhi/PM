; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.114 

	TTL	C:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp
	THUMB

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|KLibSetDeviceStateToIdle|
	IMPORT	|KernelLibIoControl|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$KLibSetDeviceStateToIdle| DCD imagerel |$LN6@KLibSetDev|
	DCD	0x1bf0049
; Function compile flags: /Ogsp
; File c:\wince800\public\common\oak\inc\pkfuncs.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |KLibSetDeviceStateToIdle| PROC

; 1632 : {

  00000		 |$LN6@KLibSetDev|
  00000	e92d 4800	 push        {r11,lr}
  00004	46eb		 mov         r11,sp
  00006	b086		 sub         sp,sp,#0x18
  00008		 |$M4|

; 1633 :     BOOL fForceCompaction = FALSE;

  00008	2300		 movs        r3,#0
  0000a	9304		 str         r3,[sp,#0x10]

; 1634 :     return KernelLibIoControl ((HANDLE) KMOD_CORE, IOCTL_KLIB_SET_DEVICE_STATE_TO_IDLE, &fForceCompaction, sizeof(fForceCompaction), NULL, 0, 0);    

  0000c	9302		 str         r3,[sp,#8]
  0000e	9301		 str         r3,[sp,#4]
  00010	9300		 str         r3,[sp]
  00012	2304		 movs        r3,#4
  00014	aa04		 add         r2,sp,#0x10
  00016	212c		 movs        r1,#0x2C
  00018	2001		 movs        r0,#1
  0001a	f000 f800	 bl          KernelLibIoControl
  0001e		 |$M7|

; 1635 : }

  0001e	b006		 add         sp,sp,#0x18
  00020	e8bd 8800	 pop         {r11,pc}
  00024		 |$M5|

			 ENDP  ; |KLibSetDeviceStateToIdle|

	IMPORT	|__security_push_cookie|
	IMPORT	|__security_pop_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|StringCchVPrintfW|
	IMPORT	|StringCchLengthW|
	IMPORT	|CeLogData|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$CeLogMsg| DCD imagerel |$LN8@CeLogMsg|
	DCD	imagerel |$unwind2$CeLogMsg|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$CeLogMsg| DCD 0x44b00032
	DCD	0x1e889e8
	DCD	0x400a8fb
	DCD	0x8801e8ff
	DCD	0xff05ef00
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffe5
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\celog.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |CeLogMsg| PROC

; 1208 : {

  00000		 |$LN8@CeLogMsg|
  00000	b40f		 push        {r0-r3}
  00002	e92d 4800	 push        {r11,lr}
  00006	46eb		 mov         r11,sp
  00008	f000 f800	 bl          __security_push_cookie
  0000c	f2ad 2d24	 subw        sp,sp,#0x224
  00010		 |$M6|
  00010	4602		 mov         r2,r0

; 1209 :     va_list arglist;
; 1210 :     WCHAR   szTemp[MAX_PATH];
; 1211 :     size_t  cchLen;
; 1212 :     HRESULT hr;
; 1213 : 
; 1214 :     // Compose a single string using the input args
; 1215 :     va_start(arglist, szFormat);
; 1216 :     hr = StringCchVPrintfW(szTemp, MAX_PATH, szFormat, arglist);

  00012	a806		 add         r0,sp,#0x18
  00014	ab8d		 add         r3,sp,#0x234
  00016	f44f 7182	 mov         r1,#0x104
  0001a	928c		 str         r2,[sp,#0x230]
  0001c	f000 f800	 bl          StringCchVPrintfW

; 1217 :     if (SUCCEEDED(hr)) {

  00020	2800		 cmp         r0,#0
  00022	db17		 blt         |$LN1@CeLogMsg|

; 1218 :         hr = StringCchLengthW(szTemp, MAX_PATH, &cchLen);

  00024	aa04		 add         r2,sp,#0x10
  00026	a806		 add         r0,sp,#0x18
  00028	f44f 7182	 mov         r1,#0x104
  0002c	f000 f800	 bl          StringCchLengthW

; 1219 :         if (SUCCEEDED(hr)) {

  00030	2800		 cmp         r0,#0
  00032	db0f		 blt         |$LN1@CeLogMsg|

; 1220 :             CeLogData(TRUE, CELID_RAW_WCHAR, szTemp, (WORD)((cchLen + 1) * sizeof(WCHAR)),
; 1221 :                       0, CELZONE_ALWAYSON, 0, FALSE);

  00034	f04f 4380	 mov         r3,#0x40000000
  00038	9301		 str         r3,[sp,#4]
  0003a	9b04		 ldr         r3,[sp,#0x10]
  0003c	2200		 movs        r2,#0
  0003e	9203		 str         r2,[sp,#0xC]
  00040	3301		 adds        r3,#1
  00042	005b		 lsls        r3,r3,#1
  00044	9202		 str         r2,[sp,#8]
  00046	9200		 str         r2,[sp]
  00048	aa06		 add         r2,sp,#0x18
  0004a	214a		 movs        r1,#0x4A
  0004c	b29b		 uxth        r3,r3
  0004e	2001		 movs        r0,#1
  00050	f000 f800	 bl          CeLogData
  00054		 |$LN1@CeLogMsg|
  00054		 |$M9|

; 1222 :         }
; 1223 :     }
; 1224 : }

  00054	f20d 2d24	 addw        sp,sp,#0x224
  00058	f000 f800	 bl          __security_pop_cookie
  0005c	f85d bb04	 pop         {r11}
  00060	f85d fb14	 ldr         pc,[sp],#0x14
  00064		 |$M7|

			 ENDP  ; |CeLogMsg|

	EXPORT	|??_C@_1CO@IGCJGAON@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DE@EDKKHCHC@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|PmStopPowerNotifications|
	IMPORT	|gpPowerNotifications|
	IMPORT	|dpCurSettings|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|PmLock|
	IMPORT	|PowerNotificationRemList|
	IMPORT	|PmUnlock|

  00008			 AREA	 |.pdata|, PDATA
|$pdata1$PmStopPowerNotifications| DCD imagerel |$LN14@PmStopPowe|
	DCD	0xfd326105

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@EDKKHCHC@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "t"
	DCB	0x0, "u", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, " ", 0x0, "s", 0x0, "t", 0x0, "a", 0x0, "t", 0x0, "u"
	DCB	0x0, "s", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| DCB "P"
	DCB	0x0, "m", 0x0, "S", 0x0, "t", 0x0, "o", 0x0, "p", 0x0, "P"
	DCB	0x0, "o", 0x0, "w", 0x0, "e", 0x0, "r", 0x0, "N", 0x0, "o"
	DCB	0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c", 0x0, "a"
	DCB	0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, "s", 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CO@IGCJGAON@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "h", 0x0, "a", 0x0, "n"
	DCB	0x0, "d", 0x0, "l", 0x0, "e", 0x0, " ", 0x0, "i", 0x0, "s"
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

  00064			 AREA	 |.text|, CODE, THUMB

  00064		 |PmStopPowerNotifications| PROC

; 174  : {

  00064		 |$LN14@PmStopPowe|
  00064	e92d 4878	 push        {r3-r6,r11,lr}
  00068	f20d 0b10	 addw        r11,sp,#0x10
  0006c		 |$M12|

; 175  :     DWORD dwStatus = ERROR_INVALID_PARAMETER;
; 176  :     PPOWER_NOTIFICATION ppn = (PPOWER_NOTIFICATION) h;
; 177  :     SETFNAME(_T("PmStopPowerNotifications"));
; 178  : 
; 179  :     PMLOGMSG(ZONE_NOTIFY || ZONE_API, (_T("%s: handle is 0x%08x\r\n"), pszFname, h));

  0006c	4e22		 ldr         r6,|$LN21@PmStopPowe| ; =|dpCurSettings|
  0006e	2457		 movs        r4,#0x57
  00070	4605		 mov         r5,r0
  00072	f8d6 3440	 ldr         r3,[r6,#0x440]
  00076	f413 7f80	 tst         r3,#0x100
  0007a	d102		 bne         |$LN6@PmStopPowe|
  0007c	f413 6f00	 tst         r3,#0x800
  00080	d00b		 beq         |$LN7@PmStopPowe|
  00082		 |$LN6@PmStopPowe|
  00082	491a		 ldr         r1,|$LN18@PmStopPowe| ; =|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00084	481b		 ldr         r0,|$LN20@PmStopPowe| ; =|??_C@_1CO@IGCJGAON@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00086	462a		 mov         r2,r5
  00088	f000 f800	 bl          NKDbgPrintfW
  0008c	4917		 ldr         r1,|$LN18@PmStopPowe| ; =|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  0008e	4819		 ldr         r0,|$LN20@PmStopPowe| ; =|??_C@_1CO@IGCJGAON@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00090	462a		 mov         r2,r5
  00092	f000 f800	 bl          CeLogMsg
  00096	f8d6 3440	 ldr         r3,[r6,#0x440]
  0009a		 |$LN7@PmStopPowe|

; 180  :     if(ppn != NULL) {

  0009a	b16d		 cbz         r5,|$LN3@PmStopPowe|

; 181  :         PMLOCK();

  0009c	f000 f800	 bl          PmLock

; 182  :         BOOL fFound = PowerNotificationRemList(&gpPowerNotifications, ppn);

  000a0	4813		 ldr         r0,|$LN19@PmStopPowe| ; =|gpPowerNotifications|
  000a2	4629		 mov         r1,r5
  000a4	f000 f800	 bl          PowerNotificationRemList

; 183  :         if(fFound) {

  000a8	b108		 cbz         r0,|$LN2@PmStopPowe|

; 184  :             dwStatus = ERROR_SUCCESS;

  000aa	2400		 movs        r4,#0

; 185  :         } else {

  000ac	e000		 b           |$LN1@PmStopPowe|
  000ae		 |$LN2@PmStopPowe|

; 186  :             dwStatus = ERROR_FILE_NOT_FOUND;

  000ae	2402		 movs        r4,#2
  000b0		 |$LN1@PmStopPowe|

; 187  :         }
; 188  :         PMUNLOCK();

  000b0	f000 f800	 bl          PmUnlock
  000b4	f8d6 3440	 ldr         r3,[r6,#0x440]
  000b8		 |$LN3@PmStopPowe|

; 189  :     }
; 190  : 
; 191  :     PMLOGMSG(ZONE_NOTIFY || ZONE_API || (dwStatus != ERROR_SUCCESS && ZONE_WARN),
; 192  :         (_T("%s: returning status %d\r\n"), pszFname, dwStatus));

  000b8	f413 7f80	 tst         r3,#0x100
  000bc	d106		 bne         |$LN8@PmStopPowe|
  000be	f413 6f00	 tst         r3,#0x800
  000c2	d103		 bne         |$LN8@PmStopPowe|
  000c4	b164		 cbz         r4,|$LN10@PmStopPowe|
  000c6	f013 0f02	 tst         r3,#2
  000ca	d009		 beq         |$LN10@PmStopPowe|
  000cc		 |$LN8@PmStopPowe|
  000cc	4907		 ldr         r1,|$LN18@PmStopPowe| ; =|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  000ce	4806		 ldr         r0,|$LN17@PmStopPowe| ; =|??_C@_1DE@EDKKHCHC@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000d0	4622		 mov         r2,r4
  000d2	f000 f800	 bl          NKDbgPrintfW
  000d6	4905		 ldr         r1,|$LN18@PmStopPowe| ; =|??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  000d8	4803		 ldr         r0,|$LN17@PmStopPowe| ; =|??_C@_1DE@EDKKHCHC@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000da	4622		 mov         r2,r4
  000dc	f000 f800	 bl          CeLogMsg
  000e0		 |$LN10@PmStopPowe|

; 193  :     return dwStatus;
; 194  : }

  000e0	4620		 mov         r0,r4
  000e2		 |$M15|
  000e2	e8bd 8878	 pop         {r3-r6,r11,pc}
  000e6		 |$LN22@PmStopPowe|
  000e6		 |$M23|
  000e6	defe		 __debugbreak
  000e8		 |$LN16@PmStopPowe|
  000e8		 |$LN17@PmStopPowe|
  000e8	0000 0000	 DCD         |??_C@_1DE@EDKKHCHC@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000ec		 |$LN18@PmStopPowe|
  000ec	0000 0000	 DCD         |??_C@_1DC@PBMANACI@?$AAP?$AAm?$AAS?$AAt?$AAo?$AAp?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  000f0		 |$LN19@PmStopPowe|
  000f0	0000 0000	 DCD         |gpPowerNotifications|
  000f4		 |$LN20@PmStopPowe|
  000f4	0000 0000	 DCD         |??_C@_1CO@IGCJGAON@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  000f8		 |$LN21@PmStopPowe|
  000f8	0000 0000	 DCD         |dpCurSettings|
  000fc		 |$M13|

			 ENDP  ; |PmStopPowerNotifications|

	EXPORT	|??_C@_1GG@MEFCMPGO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA0@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@LLHHOOMD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN@| [ DATA ] ; `string'
	EXPORT	|PmRequestPowerNotifications|
	IMPORT	|GetCallerVMProcessId|
	IMPORT	|PowerNotificationCreate|
	IMPORT	|PowerNotificationAddList|
	IMPORT	|PlatformSendInitialNotifications|
	IMPORT	|GetLastError|
	IMPORT	|SetLastError|

  00010			 AREA	 |.pdata|, PDATA
|$pdata1$PmRequestPowerNotifications| DCD imagerel |$LN21@PmRequestP|
	DCD	0x356199

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@LLHHOOMD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "t"
	DCB	0x0, "u", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ",", 0x0, " ", 0x0, "s", 0x0, "t", 0x0, "a"
	DCB	0x0, "t", 0x0, "u", 0x0, "s", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@| DCB "c"
	DCB	0x0, ":", 0x0, "\\", 0x0, "w", 0x0, "i", 0x0, "n", 0x0, "c"
	DCB	0x0, "e", 0x0, "8", 0x0, "0", 0x0, "0", 0x0, "\\", 0x0, "p"
	DCB	0x0, "l", 0x0, "a", 0x0, "t", 0x0, "f", 0x0, "o", 0x0, "r"
	DCB	0x0, "m", 0x0, "\\", 0x0, "r", 0x0, "r", 0x0, "m", 0x0, "_"
	DCB	0x0, "p", 0x0, "p", 0x0, "c", 0x0, "_", 0x0, "w", 0x0, "i"
	DCB	0x0, "n", 0x0, "d", 0x0, "o", 0x0, "w", 0x0, "s", 0x0, "\\"
	DCB	0x0, "s", 0x0, "r", 0x0, "c", 0x0, "\\", 0x0, "d", 0x0, "r"
	DCB	0x0, "i", 0x0, "v", 0x0, "e", 0x0, "r", 0x0, "s", 0x0, "\\"
	DCB	0x0, "p", 0x0, "m", 0x0, "\\", 0x0, "m", 0x0, "d", 0x0, "d"
	DCB	0x0, "\\", 0x0, "p", 0x0, "m", 0x0, "n", 0x0, "o", 0x0, "t"
	DCB	0x0, "i", 0x0, "f", 0x0, "y", 0x0, ".", 0x0, "c", 0x0, "p"
	DCB	0x0, "p", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "D", 0x0, "E", 0x0, "B"
	DCB	0x0, "U", 0x0, "G", 0x0, "C", 0x0, "H", 0x0, "K", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "i", 0x0, "n", 0x0, " ", 0x0, "f", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "s", 0x0, " "
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "l", 0x0, "i", 0x0, "n"
	DCB	0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| DCB "P"
	DCB	0x0, "m", 0x0, "R", 0x0, "e", 0x0, "q", 0x0, "u", 0x0, "e"
	DCB	0x0, "s", 0x0, "t", 0x0, "P", 0x0, "o", 0x0, "w", 0x0, "e"
	DCB	0x0, "r", 0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f"
	DCB	0x0, "i", 0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, "s", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GG@MEFCMPGO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA0@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "c", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "t", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " "
	DCB	0x0, "n", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i"
	DCB	0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n"
	DCB	0x0, " ", 0x0, "t", 0x0, "y", 0x0, "p", 0x0, "e", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, " ", 0x0, "f", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

  000fc			 AREA	 |.text|, CODE, THUMB

  000fc		 |PmRequestPowerNotifications| PROC

; 125  : {

  000fc		 |$LN21@PmRequestP|
  000fc	e92d 4bf0	 push        {r4-r9,r11,lr}
  00100	f20d 0b18	 addw        r11,sp,#0x18
  00104		 |$M19|
  00104	460f		 mov         r7,r1
  00106	4680		 mov         r8,r0

; 126  :     HANDLE hOwner = (HANDLE) GetCallerVMProcessId();

  00108	f000 f800	 bl          GetCallerVMProcessId

; 127  :     DWORD dwStatus = ERROR_SUCCESS;
; 128  :     PPOWER_NOTIFICATION ppn = NULL;
; 129  :     SETFNAME(_T("PmRequestPowerNotifications"));
; 130  : 
; 131  :     PMLOGMSG(ZONE_NOTIFY || ZONE_API, 
; 132  :         (_T("%s: creating notification type 0x%08x for 0x%08x\r\n"),
; 133  :         pszFname, dwFlags, hOwner));

  0010c	4e34		 ldr         r6,|$LN30@PmRequestP| ; =|dpCurSettings|
  0010e	2400		 movs        r4,#0
  00110	2500		 movs        r5,#0
  00112	f8d6 3440	 ldr         r3,[r6,#0x440]
  00116	4681		 mov         r9,r0
  00118	f413 7f80	 tst         r3,#0x100
  0011c	d102		 bne         |$LN8@PmRequestP|
  0011e	f413 6f00	 tst         r3,#0x800
  00122	d00d		 beq         |$LN9@PmRequestP|
  00124		 |$LN8@PmRequestP|
  00124	4929		 ldr         r1,|$LN25@PmRequestP| ; =|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00126	482d		 ldr         r0,|$LN29@PmRequestP| ; =|??_C@_1GG@MEFCMPGO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA0@|
  00128	464b		 mov         r3,r9
  0012a	463a		 mov         r2,r7
  0012c	f000 f800	 bl          NKDbgPrintfW
  00130	4926		 ldr         r1,|$LN25@PmRequestP| ; =|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00132	482a		 ldr         r0,|$LN29@PmRequestP| ; =|??_C@_1GG@MEFCMPGO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA0@|
  00134	464b		 mov         r3,r9
  00136	463a		 mov         r2,r7
  00138	f000 f800	 bl          CeLogMsg
  0013c	f8d6 3440	 ldr         r3,[r6,#0x440]
  00140		 |$LN9@PmRequestP|

; 134  : 
; 135  :     // check parameters
; 136  :     if(hMsgQ == NULL || dwFlags == 0) {

  00140	f1b8 0f00	 cmp         r8,#0
  00144	d023		 beq         |$LN4@PmRequestP|
  00146	b317		 cbz         r7,|$LN4@PmRequestP|

; 138  :     }
; 139  : 
; 140  :     // create the structure if parameters are all right
; 141  :     if(dwStatus == ERROR_SUCCESS) {
; 142  :         ppn = PowerNotificationCreate(hMsgQ, hOwner);

  00148	4649		 mov         r1,r9
  0014a	4640		 mov         r0,r8
  0014c	f000 f800	 bl          PowerNotificationCreate
  00150	4605		 mov         r5,r0

; 143  :         if(ppn != NULL) {

  00152	b17d		 cbz         r5,|$LN2@PmRequestP|

; 144  :             ppn->dwFlags = dwFlags;

  00154	606f		 str         r7,[r5,#4]

; 145  : 
; 146  :             PMLOCK();

  00156	f000 f800	 bl          PmLock

; 147  :             // add the notification structure to the list
; 148  :             PowerNotificationAddList(&gpPowerNotifications, ppn);

  0015a	481f		 ldr         r0,|$LN28@PmRequestP| ; =|gpPowerNotifications|
  0015c	4629		 mov         r1,r5
  0015e	f000 f800	 bl          PowerNotificationAddList

; 149  : 
; 150  :             // if the notification requires any platform-specific action,
; 151  :             // the platform can do it now
; 152  :             PlatformSendInitialNotifications(ppn, dwFlags);

  00162	4639		 mov         r1,r7
  00164	4628		 mov         r0,r5
  00166	f000 f800	 bl          PlatformSendInitialNotifications

; 153  :             PMUNLOCK();

  0016a	f000 f800	 bl          PmUnlock
  0016e		 |$LN17@PmRequestP|

; 154  :         } else {

  0016e	f8d6 3440	 ldr         r3,[r6,#0x440]
  00172	e00d		 b           |$LN11@PmRequestP|
  00174		 |$LN2@PmRequestP|

; 155  :             dwStatus = GetLastError();  // set by whatever failed in PowerNotificationCreate()

  00174	f000 f800	 bl          GetLastError
  00178	4604		 mov         r4,r0

; 156  :             DEBUGCHK(dwStatus != ERROR_SUCCESS);

  0017a	2c00		 cmp         r4,#0
  0017c	d1f7		 bne         |$LN17@PmRequestP|
  0017e	4a15		 ldr         r2,|$LN27@PmRequestP| ; =|??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@|
  00180	4813		 ldr         r0,|$LN26@PmRequestP| ; =|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  00182	239c		 movs        r3,#0x9C
  00184	4631		 mov         r1,r6
  00186	f000 f800	 bl          NKDbgPrintfW
  0018a	defe		 __debugbreak
  0018c	e7ef		 b           |$LN17@PmRequestP|
  0018e		 |$LN4@PmRequestP|

; 137  :         dwStatus = ERROR_INVALID_PARAMETER;

  0018e	2457		 movs        r4,#0x57
  00190		 |$LN11@PmRequestP|

; 157  :         }
; 158  :     }
; 159  : 
; 160  :     PMLOGMSG(ZONE_NOTIFY || ZONE_API || (dwStatus != ERROR_SUCCESS && ZONE_WARN),
; 161  :         (_T("%s: returning 0x%08x, status %d\r\n"), pszFname,
; 162  :         ppn, dwStatus));

  00190	f413 7f80	 tst         r3,#0x100
  00194	d106		 bne         |$LN12@PmRequestP|
  00196	f413 6f00	 tst         r3,#0x800
  0019a	d103		 bne         |$LN12@PmRequestP|
  0019c	b174		 cbz         r4,|$LN14@PmRequestP|
  0019e	f013 0f02	 tst         r3,#2
  001a2	d00b		 beq         |$LN14@PmRequestP|
  001a4		 |$LN12@PmRequestP|
  001a4	4909		 ldr         r1,|$LN25@PmRequestP| ; =|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  001a6	4808		 ldr         r0,|$LN24@PmRequestP| ; =|??_C@_1EE@LLHHOOMD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN@|
  001a8	4623		 mov         r3,r4
  001aa	462a		 mov         r2,r5
  001ac	f000 f800	 bl          NKDbgPrintfW
  001b0	4906		 ldr         r1,|$LN25@PmRequestP| ; =|??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  001b2	4805		 ldr         r0,|$LN24@PmRequestP| ; =|??_C@_1EE@LLHHOOMD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN@|
  001b4	4623		 mov         r3,r4
  001b6	462a		 mov         r2,r5
  001b8	f000 f800	 bl          CeLogMsg
  001bc		 |$LN14@PmRequestP|

; 163  :     SetLastError(dwStatus);

  001bc	4620		 mov         r0,r4
  001be	f000 f800	 bl          SetLastError

; 164  :     return ppn;
; 165  : }

  001c2	4628		 mov         r0,r5
  001c4		 |$M22|
  001c4	e8bd 8bf0	 pop         {r4-r9,r11,pc}
  001c8		 |$LN23@PmRequestP|
  001c8		 |$LN24@PmRequestP|
  001c8	0000 0000	 DCD         |??_C@_1EE@LLHHOOMD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AAs?$AAt?$AAa?$AAt?$AAu?$AAs?$AA?5?$AA?$CF?$AAd?$AA?$AN@|
  001cc		 |$LN25@PmRequestP|
  001cc	0000 0000	 DCD         |??_C@_1DI@PCFPIELD@?$AAP?$AAm?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAP?$AAo?$AAw?$AAe?$AAr?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  001d0		 |$LN26@PmRequestP|
  001d0	0000 0000	 DCD         |??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  001d4		 |$LN27@PmRequestP|
  001d4	0000 0000	 DCD         |??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@|
  001d8		 |$LN28@PmRequestP|
  001d8	0000 0000	 DCD         |gpPowerNotifications|
  001dc		 |$LN29@PmRequestP|
  001dc	0000 0000	 DCD         |??_C@_1GG@MEFCMPGO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAr?$AAe?$AAa?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA0@|
  001e0		 |$LN30@PmRequestP|
  001e0	0000 0000	 DCD         |dpCurSettings|
  001e4		 |$M20|

			 ENDP  ; |PmRequestPowerNotifications|

	EXPORT	|??_C@_1EG@OGLFPMCD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DG@KHNJBFOM@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|DeleteProcessNotifications|

  00018			 AREA	 |.pdata|, PDATA
|$pdata1$DeleteProcessNotifications| DCD imagerel |$LN23@DeleteProc|
	DCD	0xfd3460b9

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DG@KHNJBFOM@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| DCB "D"
	DCB	0x0, "e", 0x0, "l", 0x0, "e", 0x0, "t", 0x0, "e", 0x0, "P"
	DCB	0x0, "r", 0x0, "o", 0x0, "c", 0x0, "e", 0x0, "s", 0x0, "s"
	DCB	0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i"
	DCB	0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n"
	DCB	0x0, "s", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EG@OGLFPMCD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "d", 0x0, "e", 0x0, "l"
	DCB	0x0, "e", 0x0, "t", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " "
	DCB	0x0, "n", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i"
	DCB	0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n"
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

  001e4			 AREA	 |.text|, CODE, THUMB

  001e4		 |DeleteProcessNotifications| PROC

; 86   : {

  001e4		 |$LN23@DeleteProc|
  001e4	e92d 49f8	 push        {r3-r8,r11,lr}
  001e8	f20d 0b18	 addw        r11,sp,#0x18
  001ec		 |$M21|
  001ec	4607		 mov         r7,r0

; 87   :     BOOL fDone = FALSE;

  001ee	2500		 movs        r5,#0

; 88   :     SETFNAME(_T("DeleteProcessNotifications"));
; 89   : 
; 90   :     PMLOCK();

  001f0	f000 f800	 bl          PmLock
  001f4	f8df 8054	 ldr         r8,|$LN29@DeleteProc| ; =|dpCurSettings|
  001f8	4e13		 ldr         r6,|$LN28@DeleteProc| ; =|gpPowerNotifications|
  001fa		 |$LL7@DeleteProc|
  001fa	6834		 ldr         r4,[r6]
  001fc	e003		 b           |$LN19@DeleteProc|
  001fe		 |$LL5@DeleteProc|

; 98   :             if(ppn->hOwner == hProcess) {

  001fe	68a3		 ldr         r3,[r4,#8]
  00200	42bb		 cmp         r3,r7
  00202	d009		 beq         |$LN14@DeleteProc|

; 96   :         PPOWER_NOTIFICATION ppn;
; 97   :         for(ppn = gpPowerNotifications; ppn != NULL; ppn = ppn->pNext) {

  00204	68e4		 ldr         r4,[r4,#0xC]
  00206		 |$LN19@DeleteProc|
  00206	2c00		 cmp         r4,#0
  00208	d1f9		 bne         |$LL5@DeleteProc|

; 108  :             // yes, no need to re-iterate
; 109  :             fDone = TRUE;

  0020a	2501		 movs        r5,#1
  0020c		 |$LN1@DeleteProc|

; 91   : 
; 92   :     // remove all notifications belonging to this process.  If we
; 93   :     // remove one from the list, start again -- we will eventually run
; 94   :     // out of notifications for this process.
; 95   :     while(!fDone) {

  0020c	2d00		 cmp         r5,#0
  0020e	d0f4		 beq         |$LL7@DeleteProc|

; 110  :         }
; 111  :     }
; 112  : 
; 113  :     PMUNLOCK();

  00210	f000 f800	 bl          PmUnlock
  00214		 |$M24|

; 114  : }

  00214	e8bd 89f8	 pop         {r3-r8,r11,pc}
  00218		 |$LN14@DeleteProc|

; 99   :                 PMLOGMSG(ZONE_NOTIFY, (_T("%s: deleting notification 0x%08x\r\n"),
; 100  :                     pszFname, ppn));

  00218	f8d8 3440	 ldr         r3,[r8,#0x440]
  0021c	f413 7f80	 tst         r3,#0x100
  00220	d009		 beq         |$LN10@DeleteProc|
  00222	4908		 ldr         r1,|$LN27@DeleteProc| ; =|??_C@_1DG@KHNJBFOM@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00224	4806		 ldr         r0,|$LN26@DeleteProc| ; =|??_C@_1EG@OGLFPMCD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  00226	4622		 mov         r2,r4
  00228	f000 f800	 bl          NKDbgPrintfW
  0022c	4905		 ldr         r1,|$LN27@DeleteProc| ; =|??_C@_1DG@KHNJBFOM@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  0022e	4804		 ldr         r0,|$LN26@DeleteProc| ; =|??_C@_1EG@OGLFPMCD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  00230	4622		 mov         r2,r4
  00232	f000 f800	 bl          CeLogMsg
  00236		 |$LN10@DeleteProc|

; 101  :                 PowerNotificationRemList(&gpPowerNotifications, ppn);

  00236	4621		 mov         r1,r4
  00238	4630		 mov         r0,r6
  0023a	f000 f800	 bl          PowerNotificationRemList

; 102  :                 break;
; 103  :             }
; 104  :         }
; 105  : 
; 106  :         // did we get through the whole list?
; 107  :         if(ppn == NULL) {

  0023e	e7e5		 b           |$LN1@DeleteProc|
  00240		 |$LN25@DeleteProc|
  00240		 |$LN26@DeleteProc|
  00240	0000 0000	 DCD         |??_C@_1EG@OGLFPMCD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAl?$AAe?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  00244		 |$LN27@DeleteProc|
  00244	0000 0000	 DCD         |??_C@_1DG@KHNJBFOM@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00248		 |$LN28@DeleteProc|
  00248	0000 0000	 DCD         |gpPowerNotifications|
  0024c		 |$LN29@DeleteProc|
  0024c	0000 0000	 DCD         |dpCurSettings|
  00250		 |$M22|

			 ENDP  ; |DeleteProcessNotifications|

	EXPORT	|??_C@_1GI@KNKFKCIB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GI@DENKDPBO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAr?$AAi?$AAt?$AAe?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	EXPORT	|SendNotification|
	IMPORT	|WriteMsgQueue|

  00020			 AREA	 |.pdata|, PDATA
|$pdata1$SendNotification| DCD imagerel |$LN11@SendNotifi|
	DCD	0xfd7360f1

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GI@DENKDPBO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAr?$AAi?$AAt?$AAe?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "W", 0x0, "r", 0x0, "i"
	DCB	0x0, "t", 0x0, "e", 0x0, "M", 0x0, "s", 0x0, "g", 0x0, "Q"
	DCB	0x0, "u", 0x0, "e", 0x0, "u", 0x0, "e", 0x0, "(", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ","
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, ")", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@| DCB "S"
	DCB	0x0, "e", 0x0, "n", 0x0, "d", 0x0, "N", 0x0, "o", 0x0, "t"
	DCB	0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "i", 0x0, "o", 0x0, "n", 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GI@KNKFKCIB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "s", 0x0, "e", 0x0, "n"
	DCB	0x0, "d", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "n"
	DCB	0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c"
	DCB	0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " "
	DCB	0x0, "t", 0x0, "o", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "(", 0x0, "o"
	DCB	0x0, "w", 0x0, "n", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

  00250			 AREA	 |.text|, CODE, THUMB

  00250		 |SendNotification| PROC

; 27   : {

  00250		 |$LN11@SendNotifi|
  00250	e92d 48fc	 push        {r2-r7,r11,lr}
  00254	f20d 0b18	 addw        r11,sp,#0x18
  00258		 |$M9|

; 28   :     SETFNAME(_T("SendNotification"));
; 29   : 
; 30   :     PMLOGMSG(ZONE_NOTIFY, 
; 31   :         (_T("%s: sending notification to 0x%08x (owner 0x%08x)\r\n"),
; 32   :         pszFname, ppn, ppn->hOwner));

  00258	4d1e		 ldr         r5,|$LN17@SendNotifi| ; =|dpCurSettings|
  0025a	4616		 mov         r6,r2
  0025c	460f		 mov         r7,r1
  0025e	f8d5 3440	 ldr         r3,[r5,#0x440]
  00262	4604		 mov         r4,r0
  00264	f413 7f80	 tst         r3,#0x100
  00268	d00b		 beq         |$LN4@SendNotifi|
  0026a	68a3		 ldr         r3,[r4,#8]
  0026c	4917		 ldr         r1,|$LN15@SendNotifi| ; =|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@|
  0026e	4602		 mov         r2,r0
  00270	4817		 ldr         r0,|$LN16@SendNotifi| ; =|??_C@_1GI@KNKFKCIB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0@|
  00272	f000 f800	 bl          NKDbgPrintfW
  00276	68a3		 ldr         r3,[r4,#8]
  00278	4914		 ldr         r1,|$LN15@SendNotifi| ; =|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@|
  0027a	4815		 ldr         r0,|$LN16@SendNotifi| ; =|??_C@_1GI@KNKFKCIB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0@|
  0027c	4622		 mov         r2,r4
  0027e	f000 f800	 bl          CeLogMsg
  00282		 |$LN4@SendNotifi|

; 33   :     if(!WriteMsgQueue(ppn->hMsgQ, ppb, dwLen, 0, 0)) {

  00282	6820		 ldr         r0,[r4]
  00284	2300		 movs        r3,#0
  00286	4632		 mov         r2,r6
  00288	4639		 mov         r1,r7
  0028a	9300		 str         r3,[sp]
  0028c	f000 f800	 bl          WriteMsgQueue
  00290	b9c0		 cbnz        r0,|$LN6@SendNotifi|

; 34   :         PMLOGMSG(ZONE_WARN, (_T("%s: WriteMsgQueue(0x%08x, 0x%08x, 0x%x) failed %d\r\n"),
; 35   :             pszFname, ppn->hMsgQ, ppb, dwLen, GetLastError()));

  00292	f8d5 3440	 ldr         r3,[r5,#0x440]
  00296	f013 0f02	 tst         r3,#2
  0029a	d013		 beq         |$LN6@SendNotifi|
  0029c	f000 f800	 bl          GetLastError
  002a0	6822		 ldr         r2,[r4]
  002a2	490a		 ldr         r1,|$LN15@SendNotifi| ; =|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@|
  002a4	9001		 str         r0,[sp,#4]
  002a6	4808		 ldr         r0,|$LN14@SendNotifi| ; =|??_C@_1GI@DENKDPBO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAr?$AAi?$AAt?$AAe?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  002a8	463b		 mov         r3,r7
  002aa	9600		 str         r6,[sp]
  002ac	f000 f800	 bl          NKDbgPrintfW
  002b0	f000 f800	 bl          GetLastError
  002b4	6822		 ldr         r2,[r4]
  002b6	4905		 ldr         r1,|$LN15@SendNotifi| ; =|??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@|
  002b8	9001		 str         r0,[sp,#4]
  002ba	4803		 ldr         r0,|$LN14@SendNotifi| ; =|??_C@_1GI@DENKDPBO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAr?$AAi?$AAt?$AAe?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  002bc	463b		 mov         r3,r7
  002be	9600		 str         r6,[sp]
  002c0	f000 f800	 bl          CeLogMsg
  002c4		 |$LN6@SendNotifi|
  002c4		 |$M12|

; 36   :     }        
; 37   : }

  002c4	e8bd 88fc	 pop         {r2-r7,r11,pc}
  002c8		 |$LN13@SendNotifi|
  002c8		 |$LN14@SendNotifi|
  002c8	0000 0000	 DCD         |??_C@_1GI@DENKDPBO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAr?$AAi?$AAt?$AAe?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  002cc		 |$LN15@SendNotifi|
  002cc	0000 0000	 DCD         |??_C@_1CC@BDENJPOO@?$AAS?$AAe?$AAn?$AAd?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?$AA@|
  002d0		 |$LN16@SendNotifi|
  002d0	0000 0000	 DCD         |??_C@_1GI@KNKFKCIB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0@|
  002d4		 |$LN17@SendNotifi|
  002d4	0000 0000	 DCD         |dpCurSettings|
  002d8		 |$M10|

			 ENDP  ; |SendNotification|

	EXPORT	|??_C@_1FO@BFJEGKNE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FC@IHBDDNIO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAo?$AAn?$AAe?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc@| [ DATA ] ; `string'
	EXPORT	|GenerateNotifications|

  00028			 AREA	 |.pdata|, PDATA
|$pdata1$GenerateNotifications| DCD imagerel |$LN24@GenerateNo|
	DCD	0x1b3016d

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@IHBDDNIO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAo?$AAn?$AAe?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "d", 0x0, "o", 0x0, "n"
	DCB	0x0, "e", 0x0, " ", 0x0, "s", 0x0, "e", 0x0, "n", 0x0, "d"
	DCB	0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "t", 0x0, "y"
	DCB	0x0, "p", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "n", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i"
	DCB	0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n"
	DCB	0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@| DCB "G"
	DCB	0x0, "e", 0x0, "n", 0x0, "e", 0x0, "r", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f"
	DCB	0x0, "i", 0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, "s", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FO@BFJEGKNE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "s", 0x0, "e", 0x0, "n"
	DCB	0x0, "d", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "t"
	DCB	0x0, "y", 0x0, "p", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "n", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f"
	DCB	0x0, "i", 0x0, "c", 0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, "s", 0x0, " ", 0x0, "(", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp
; File c:\wince800\public\common\oak\inc\pkfuncs.h
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

  002d8			 AREA	 |.text|, CODE, THUMB

  002d8		 |GenerateNotifications| PROC

; 42   : {

  002d8		 |$LN24@GenerateNo|
  002d8	e92d 48f0	 push        {r4-r7,r11,lr}
  002dc	f20d 0b10	 addw        r11,sp,#0x10
  002e0	b086		 sub         sp,sp,#0x18
  002e2		 |$M22|
  002e2	4604		 mov         r4,r0

; 43   :     PPOWER_NOTIFICATION ppn;
; 44   :     DWORD dwLen;
; 45   :     SETFNAME(_T("GenerateNotifications"));
; 46   : 
; 47   :     PREFAST_DEBUGCHK(ppb != NULL);

  002e4	4f30		 ldr         r7,|$LN33@GenerateNo| ; =|dpCurSettings|
  002e6	b934		 cbnz        r4,|$LN10@GenerateNo|
  002e8	4a2e		 ldr         r2,|$LN32@GenerateNo| ; =|??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@|
  002ea	482d		 ldr         r0,|$LN31@GenerateNo| ; =|??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  002ec	232f		 movs        r3,#0x2F
  002ee	4639		 mov         r1,r7
  002f0	f000 f800	 bl          NKDbgPrintfW
  002f4	defe		 __debugbreak
  002f6		 |$LN10@GenerateNo|

; 48   : 
; 49   :     // Calculate the amount of data to send, since these are variable length
; 50   :     // messages.  Always send at least sizeof(POWER_BROADCAST) bytes so that
; 51   :     // the receiver doesn't have to worry about structure alignment and size
; 52   :     // issues when they receive the message.
; 53   :     dwLen = ppb->Length + (3 * sizeof(DWORD));

  002f6	68a3		 ldr         r3,[r4,#8]
  002f8	f113 060c	 adds        r6,r3,#0xC

; 54   :     if(dwLen < sizeof(POWER_BROADCAST)) {

  002fc	2e10		 cmp         r6,#0x10
  002fe	d200		 bcs         |$LN6@GenerateNo|

; 55   :         dwLen = sizeof(POWER_BROADCAST);

  00300	2610		 movs        r6,#0x10
  00302		 |$LN6@GenerateNo|

; 56   :     }
; 57   : 
; 58   :     PMLOGMSG(ZONE_NOTIFY, (_T("%s: sending type %d notifications (%d bytes)\r\n"),
; 59   :         pszFname, ppb->Message, dwLen));

  00302	f8d7 3440	 ldr         r3,[r7,#0x440]
  00306	f413 7f80	 tst         r3,#0x100
  0030a	d00b		 beq         |$LN11@GenerateNo|
  0030c	6822		 ldr         r2,[r4]
  0030e	4921		 ldr         r1,|$LN28@GenerateNo| ; =|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00310	4822		 ldr         r0,|$LN30@GenerateNo| ; =|??_C@_1FO@BFJEGKNE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn@|
  00312	4633		 mov         r3,r6
  00314	f000 f800	 bl          NKDbgPrintfW
  00318	6822		 ldr         r2,[r4]
  0031a	491e		 ldr         r1,|$LN28@GenerateNo| ; =|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  0031c	481f		 ldr         r0,|$LN30@GenerateNo| ; =|??_C@_1FO@BFJEGKNE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn@|
  0031e	4633		 mov         r3,r6
  00320	f000 f800	 bl          CeLogMsg
  00324		 |$LN11@GenerateNo|

; 60   : 
; 61   : #if (_WINCEOSVER<=700)
; 62   : #else
; 63   :     // user idle event processing
; 64   :     if( (ppb->Message == PBT_TRANSITION) && (ppb->Flags == POWER_STATE_USERIDLE) )

  00324	6823		 ldr         r3,[r4]
  00326	2b01		 cmp         r3,#1
  00328	d10e		 bne         |$LN15@GenerateNo|
  0032a	6863		 ldr         r3,[r4,#4]
  0032c	f1b3 7f80	 cmp         r3,#0x1000000
  00330	d10a		 bne         |$LN15@GenerateNo|
; File c:\wince800\public\common\oak\inc\pkfuncs.h

; 1633 :     BOOL fForceCompaction = FALSE;

  00332	2300		 movs        r3,#0
  00334	9304		 str         r3,[sp,#0x10]

; 1634 :     return KernelLibIoControl ((HANDLE) KMOD_CORE, IOCTL_KLIB_SET_DEVICE_STATE_TO_IDLE, &fForceCompaction, sizeof(fForceCompaction), NULL, 0, 0);    

  00336	9302		 str         r3,[sp,#8]
  00338	9301		 str         r3,[sp,#4]
  0033a	9300		 str         r3,[sp]
  0033c	2304		 movs        r3,#4
  0033e	aa04		 add         r2,sp,#0x10
  00340	212c		 movs        r1,#0x2C
  00342	2001		 movs        r0,#1
  00344	f000 f800	 bl          KernelLibIoControl
  00348		 |$LN15@GenerateNo|
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmnotify.cpp

; 69   :     for(ppn = gpPowerNotifications; ppn != NULL; ppn = ppn->pNext) {

  00348	4b13		 ldr         r3,|$LN29@GenerateNo| ; =|gpPowerNotifications|
  0034a	681d		 ldr         r5,[r3]
  0034c	e009		 b           |$LN20@GenerateNo|
  0034e		 |$LL4@GenerateNo|

; 70   :         // is this a message type for which the client has registered?
; 71   :         if((ppn->dwFlags & ppb->Message) != 0) {

  0034e	686a		 ldr         r2,[r5,#4]
  00350	6823		 ldr         r3,[r4]
  00352	421a		 tst         r2,r3
  00354	d004		 beq         |$LN3@GenerateNo|

; 72   :             // yes, send the message
; 73   :             SendNotification(ppn, ppb, dwLen);

  00356	4632		 mov         r2,r6
  00358	4621		 mov         r1,r4
  0035a	4628		 mov         r0,r5
  0035c	f000 f800	 bl          SendNotification
  00360		 |$LN3@GenerateNo|

; 69   :     for(ppn = gpPowerNotifications; ppn != NULL; ppn = ppn->pNext) {

  00360	68ed		 ldr         r5,[r5,#0xC]
  00362		 |$LN20@GenerateNo|
  00362	2d00		 cmp         r5,#0
  00364	d1f3		 bne         |$LL4@GenerateNo|

; 74   :         }
; 75   :     }
; 76   :     PMUNLOCK();

  00366	f000 f800	 bl          PmUnlock

; 77   : 
; 78   :     PMLOGMSG(ZONE_NOTIFY, (_T("%s: done sending type %d notifications\r\n"),
; 79   :         pszFname, ppb->Message));

  0036a	f8d7 3440	 ldr         r3,[r7,#0x440]
  0036e	f413 7f80	 tst         r3,#0x100
  00372	d009		 beq         |$LN13@GenerateNo|
  00374	6822		 ldr         r2,[r4]
  00376	4907		 ldr         r1,|$LN28@GenerateNo| ; =|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00378	4805		 ldr         r0,|$LN27@GenerateNo| ; =|??_C@_1FC@IHBDDNIO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAo?$AAn?$AAe?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc@|
  0037a	f000 f800	 bl          NKDbgPrintfW
  0037e	6822		 ldr         r2,[r4]
  00380	4904		 ldr         r1,|$LN28@GenerateNo| ; =|??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00382	4803		 ldr         r0,|$LN27@GenerateNo| ; =|??_C@_1FC@IHBDDNIO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAo?$AAn?$AAe?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc@|
  00384	f000 f800	 bl          CeLogMsg
  00388		 |$LN13@GenerateNo|
  00388		 |$M25|

; 80   : }

  00388	b006		 add         sp,sp,#0x18
  0038a	e8bd 88f0	 pop         {r4-r7,r11,pc}
  0038e		 |$LN34@GenerateNo|
  0038e		 |$M35|
  0038e	defe		 __debugbreak
  00390		 |$LN26@GenerateNo|
  00390		 |$LN27@GenerateNo|
  00390	0000 0000	 DCD         |??_C@_1FC@IHBDDNIO@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAo?$AAn?$AAe?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc@|
  00394		 |$LN28@GenerateNo|
  00394	0000 0000	 DCD         |??_C@_1CM@PAJMHOJ@?$AAG?$AAe?$AAn?$AAe?$AAr?$AAa?$AAt?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$AA@|
  00398		 |$LN29@GenerateNo|
  00398	0000 0000	 DCD         |gpPowerNotifications|
  0039c		 |$LN30@GenerateNo|
  0039c	0000 0000	 DCD         |??_C@_1FO@BFJEGKNE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAe?$AAn?$AAd?$AAi?$AAn?$AAg?$AA?5?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn@|
  003a0		 |$LN31@GenerateNo|
  003a0	0000 0000	 DCD         |??_C@_1FK@FNONLNGN@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAE?$AAB?$AAU?$AAG?$AAC?$AAH?$AAK?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAi?$AAn?$AA?5?$AAf?$AAi?$AAl?$AAe?$AA?5?$AA?$CF?$AAs?$AA?5?$AAa@|
  003a4		 |$LN32@GenerateNo|
  003a4	0000 0000	 DCD         |??_C@_1IK@DHIGKIGH@?$AAc?$AA?3?$AA?2?$AAw?$AAi?$AAn?$AAc?$AAe?$AA8?$AA0?$AA0?$AA?2?$AAp?$AAl?$AAa?$AAt?$AAf?$AAo?$AAr?$AAm?$AA?2?$AAr?$AAr?$AAm?$AA_?$AAp?$AAp?$AAc?$AA_?$AAw?$AAi?$AAn@|
  003a8		 |$LN33@GenerateNo|
  003a8	0000 0000	 DCD         |dpCurSettings|
  003ac		 |$M23|

			 ENDP  ; |GenerateNotifications|

	END
