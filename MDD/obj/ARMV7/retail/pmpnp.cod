; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.114 

	TTL	C:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp
	THUMB

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|SetEvent|
	IMPORT	|EventModify|
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |SetEvent| PROC

; 244  :     return EventModify(h,EVENT_SET);

  00000	2103		 movs        r1,#3
  00002		 |$M4|
  00002	f000 9000	 b           EventModify

			 ENDP  ; |SetEvent|

	EXPORT	|GetCurrentThread|
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |GetCurrentThread| PROC

; 358  :     return ((HANDLE)(SH_CURTHREAD+SYS_HANDLE_BASE));

  00000	2041		 movs        r0,#0x41
  00002		 |$M4|

; 359  : }

  00002	4770		 bx          lr

			 ENDP  ; |GetCurrentThread|

	EXPORT	|GetCurrentThreadId|
	IMPORT	|__GetUserKData|
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |GetCurrentThreadId| PROC

; 372  :     return __GetUserKData (SYSHANDLE_OFFSET + (SH_CURTHREAD * sizeof(HANDLE)));

  00000	2008		 movs        r0,#8
  00002		 |$M4|
  00002	f000 9000	 b           __GetUserKData

			 ENDP  ; |GetCurrentThreadId|

	IMPORT	|__security_push_cookie|
	IMPORT	|__security_pop_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|StringCchVPrintfW|
	IMPORT	|StringCchLengthW|
	IMPORT	|CeLogData|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$CeLogMsg| DCD imagerel |$LN8@CeLogMsg|
	DCD	imagerel |$unwind2$CeLogMsg|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$CeLogMsg| DCD 0x44b00032
	DCD	0x1e889e8
	DCD	0x400a8fb
	DCD	0x8801e8ff
	DCD	0xff05ef00
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffe5
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\celog.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |CeLogMsg| PROC

; 1208 : {

  00000		 |$LN8@CeLogMsg|
  00000	b40f		 push        {r0-r3}
  00002	e92d 4800	 push        {r11,lr}
  00006	46eb		 mov         r11,sp
  00008	f000 f800	 bl          __security_push_cookie
  0000c	f2ad 2d24	 subw        sp,sp,#0x224
  00010		 |$M6|
  00010	4602		 mov         r2,r0

; 1209 :     va_list arglist;
; 1210 :     WCHAR   szTemp[MAX_PATH];
; 1211 :     size_t  cchLen;
; 1212 :     HRESULT hr;
; 1213 : 
; 1214 :     // Compose a single string using the input args
; 1215 :     va_start(arglist, szFormat);
; 1216 :     hr = StringCchVPrintfW(szTemp, MAX_PATH, szFormat, arglist);

  00012	a806		 add         r0,sp,#0x18
  00014	ab8d		 add         r3,sp,#0x234
  00016	f44f 7182	 mov         r1,#0x104
  0001a	928c		 str         r2,[sp,#0x230]
  0001c	f000 f800	 bl          StringCchVPrintfW

; 1217 :     if (SUCCEEDED(hr)) {

  00020	2800		 cmp         r0,#0
  00022	db17		 blt         |$LN1@CeLogMsg|

; 1218 :         hr = StringCchLengthW(szTemp, MAX_PATH, &cchLen);

  00024	aa04		 add         r2,sp,#0x10
  00026	a806		 add         r0,sp,#0x18
  00028	f44f 7182	 mov         r1,#0x104
  0002c	f000 f800	 bl          StringCchLengthW

; 1219 :         if (SUCCEEDED(hr)) {

  00030	2800		 cmp         r0,#0
  00032	db0f		 blt         |$LN1@CeLogMsg|

; 1220 :             CeLogData(TRUE, CELID_RAW_WCHAR, szTemp, (WORD)((cchLen + 1) * sizeof(WCHAR)),
; 1221 :                       0, CELZONE_ALWAYSON, 0, FALSE);

  00034	f04f 4380	 mov         r3,#0x40000000
  00038	9301		 str         r3,[sp,#4]
  0003a	9b04		 ldr         r3,[sp,#0x10]
  0003c	2200		 movs        r2,#0
  0003e	9203		 str         r2,[sp,#0xC]
  00040	3301		 adds        r3,#1
  00042	005b		 lsls        r3,r3,#1
  00044	9202		 str         r2,[sp,#8]
  00046	9200		 str         r2,[sp]
  00048	aa06		 add         r2,sp,#0x18
  0004a	214a		 movs        r1,#0x4A
  0004c	b29b		 uxth        r3,r3
  0004e	2001		 movs        r0,#1
  00050	f000 f800	 bl          CeLogData
  00054		 |$LN1@CeLogMsg|
  00054		 |$M9|

; 1222 :         }
; 1223 :     }
; 1224 : }

  00054	f20d 2d24	 addw        sp,sp,#0x224
  00058	f000 f800	 bl          __security_pop_cookie
  0005c	f85d bb04	 pop         {r11}
  00060	f85d fb14	 ldr         pc,[sp],#0x14
  00064		 |$M7|

			 ENDP  ; |CeLogMsg|

	EXPORT	|??_C@_1DO@DCJBELBH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAa?$AAd?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CG@EGNINIOP@?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FI@ONIMKDGK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?5?$AAn?$AAa?$AAm?$AAe?$AA?5?$AAl?$AAo?$AAn?$AAg?$AAe?$AAr?$AA?5?$AAt?$AAh?$AAa?$AAn?$AA?5?$AA?$CF?$AAd?$AA?5?$AAc@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@EFOEONDD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAg?$AAo?$AAt?$AA?5?$AAr?$AAu?$AAn?$AAt?$AA?5?$AAm?$AAe?$AAs?$AAs?$AAa?$AAg?$AAe?$AA?5?$AA?$CI?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?$CJ?$AA?$AN@| [ DATA ] ; `string'
	EXPORT	|?ProcessPnPMsgQueue@@YAHPAX@Z|		; ProcessPnPMsgQueue
	IMPORT	|memset|
	IMPORT	|ReadMsgQueue|
	IMPORT	|dpCurSettings|
	IMPORT	|GetLastError|
	IMPORT	|towlower|
	IMPORT	|AddDevice|
	IMPORT	|RemoveDevice|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$?ProcessPnPMsgQueue@@YAHPAX@Z| DCD imagerel |$LN28@ProcessPnP|
	DCD	imagerel |$unwind2$?ProcessPnPMsgQueue@@YAHPAX@Z|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$?ProcessPnPMsgQueue@@YAHPAX@Z| DCD 0x4430006a
	DCD	0x1e8dce8
	DCD	0xff70a8fc
	DCD	0x70a801e8
	DCD	0xff
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffe9

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@EFOEONDD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAg?$AAo?$AAt?$AA?5?$AAr?$AAu?$AAn?$AAt?$AA?5?$AAm?$AAe?$AAs?$AAs?$AAa?$AAg?$AAe?$AA?5?$AA?$CI?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?$CJ?$AA?$AN@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "g", 0x0, "o", 0x0, "t"
	DCB	0x0, " ", 0x0, "r", 0x0, "u", 0x0, "n", 0x0, "t", 0x0, " "
	DCB	0x0, "m", 0x0, "e", 0x0, "s", 0x0, "s", 0x0, "a", 0x0, "g"
	DCB	0x0, "e", 0x0, " ", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FI@ONIMKDGK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?5?$AAn?$AAa?$AAm?$AAe?$AA?5?$AAl?$AAo?$AAn?$AAg?$AAe?$AAr?$AA?5?$AAt?$AAh?$AAa?$AAn?$AA?5?$AA?$CF?$AAd?$AA?5?$AAc@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "d", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, " ", 0x0, "n", 0x0, "a"
	DCB	0x0, "m", 0x0, "e", 0x0, " ", 0x0, "l", 0x0, "o", 0x0, "n"
	DCB	0x0, "g", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "t", 0x0, "h"
	DCB	0x0, "a", 0x0, "n", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "c", 0x0, "h", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "c"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, "s", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CG@EGNINIOP@?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$AA@| DCB "P"
	DCB	0x0, "r", 0x0, "o", 0x0, "c", 0x0, "e", 0x0, "s", 0x0, "s"
	DCB	0x0, "P", 0x0, "n", 0x0, "P", 0x0, "M", 0x0, "s", 0x0, "g"
	DCB	0x0, "Q", 0x0, "u", 0x0, "e", 0x0, "u", 0x0, "e", 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@DCJBELBH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAa?$AAd?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "R", 0x0, "e", 0x0, "a"
	DCB	0x0, "d", 0x0, "M", 0x0, "s", 0x0, "g", 0x0, "Q", 0x0, "u"
	DCB	0x0, "e", 0x0, "u", 0x0, "e", 0x0, "(", 0x0, ")", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |?ProcessPnPMsgQueue@@YAHPAX@Z| PROC	; ProcessPnPMsgQueue

; 27   : {

  00000		 |$LN28@ProcessPnP|
  00000	e92d 4870	 push        {r4-r6,r11,lr}
  00004	f20d 0b0c	 addw        r11,sp,#0xC
  00008	f000 f800	 bl          __security_push_cookie
  0000c	f2ad 3d70	 subw        sp,sp,#0x370
  00010		 |$M26|
  00010	4604		 mov         r4,r0

; 28   :     BOOL fOk = FALSE;
; 29   :     UCHAR deviceBuf[PNP_QUEUE_SIZE];
; 30   :     DWORD iBytesInQueue = 0;

  00012	2300		 movs        r3,#0

; 31   :     DWORD dwFlags = 0;
; 32   :     SETFNAME(_T("ProcessPnPMsgQueue"));
; 33   : 
; 34   :     // read a message from the message queue -- it should be a device advertisement
; 35   :     memset(deviceBuf, 0, PNP_QUEUE_SIZE);

  00014	a804		 add         r0,sp,#0x10
  00016	f44f 7258	 mov         r2,#0x360
  0001a	2100		 movs        r1,#0
  0001c	9302		 str         r3,[sp,#8]
  0001e	9303		 str         r3,[sp,#0xC]
  00020	2500		 movs        r5,#0
  00022	f000 f800	 bl          memset

; 36   :     if ( !ReadMsgQueue(hMsgQ, deviceBuf, PNP_QUEUE_SIZE, &iBytesInQueue, 0, &dwFlags)) {

  00026	ab03		 add         r3,sp,#0xC
  00028	9301		 str         r3,[sp,#4]
  0002a	2600		 movs        r6,#0
  0002c	ab02		 add         r3,sp,#8
  0002e	a904		 add         r1,sp,#0x10
  00030	f44f 7258	 mov         r2,#0x360
  00034	4620		 mov         r0,r4
  00036	9600		 str         r6,[sp]
  00038	f000 f800	 bl          ReadMsgQueue
  0003c	b950		 cbnz        r0,|$LN12@ProcessPnP|

; 37   :         // nothing in the queue
; 38   :         PMLOGMSG(ZONE_WARN, (_T("%s: ReadMsgQueue() failed %d\r\n"), pszFname,
; 39   :             GetLastError()));

  0003e	4b27		 ldr         r3,|$LN33@ProcessPnP| ; =|dpCurSettings|
  00040	f8d3 3440	 ldr         r3,[r3,#0x440]
  00044	f013 0f02	 tst         r3,#2
  00048	d03d		 beq         |$LN19@ProcessPnP|
  0004a	f000 f800	 bl          GetLastError
  0004e	4602		 mov         r2,r0
  00050	4824		 ldr         r0,|$LN35@ProcessPnP| ; =|??_C@_1DO@DCJBELBH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAa?$AAd?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|

; 40   :     } else if(iBytesInQueue >= sizeof(DEVDETAIL)) {

  00052	e035		 b           |$LN24@ProcessPnP|
  00054		 |$LN12@ProcessPnP|
  00054	9a02		 ldr         r2,[sp,#8]
  00056	2a20		 cmp         r2,#0x20
  00058	d32b		 bcc         |$LN10@ProcessPnP|

; 41   :         // process the message
; 42   :         PDEVDETAIL pDevDetail = (PDEVDETAIL) deviceBuf;
; 43   :         
; 44   :         // check for overlarge names
; 45   :         if(pDevDetail->cbName < 0 || pDevDetail->cbName > ((PNP_MAX_NAMELEN - 1) * sizeof(pDevDetail->szName[0]))) {

  0005a	9b0a		 ldr         r3,[sp,#0x28]
  0005c	2b00		 cmp         r3,#0
  0005e	db1f		 blt         |$LN8@ProcessPnP|
  00060	2bfe		 cmp         r3,#0xFE
  00062	d81d		 bhi         |$LN8@ProcessPnP|

; 48   :         } else {
; 49   :             // convert the device name to lower case
; 50   :             int i;
; 51   :             for(i = 0; i < (PNP_MAX_NAMELEN - 1) && pDevDetail->szName[i] != 0; i++) {

  00064	2500		 movs        r5,#0
  00066	ac04		 add         r4,sp,#0x10
  00068		 |$LL6@ProcessPnP|
  00068	8ba0		 ldrh        r0,[r4,#0x1C]
  0006a	b130		 cbz         r0,|$LN4@ProcessPnP|

; 52   :                 pDevDetail->szName[i] = _totlower(pDevDetail->szName[i]);

  0006c	f000 f800	 bl          towlower
  00070	83a0		 strh        r0,[r4,#0x1C]
  00072	3501		 adds        r5,#1
  00074	3402		 adds        r4,#2
  00076	2d7f		 cmp         r5,#0x7F
  00078	dbf6		 blt         |$LL6@ProcessPnP|
  0007a		 |$LN4@ProcessPnP|

; 53   :             }
; 54   :             pDevDetail->szName[i] = 0;

  0007a	ab04		 add         r3,sp,#0x10
  0007c	eb03 0345	 add         r3,r3,r5,lsl #1
  00080	839e		 strh        r6,[r3,#0x1C]

; 55   :             
; 56   :             // add or remove the device -- note that a particular interface may be
; 57   :             // advertised more than once, so these routines must handle that possibility.
; 58   :             if(pDevDetail->fAttached) {

  00082	9b09		 ldr         r3,[sp,#0x24]
  00084	b133		 cbz         r3,|$LN3@ProcessPnP|

; 59   :                 AddDevice(&pDevDetail->guidDevClass, pDevDetail->szName, NULL, NULL);

  00086	a90b		 add         r1,sp,#0x2C
  00088	a804		 add         r0,sp,#0x10
  0008a	2300		 movs        r3,#0
  0008c	2200		 movs        r2,#0
  0008e	f000 f800	 bl          AddDevice

; 60   :             } else {

  00092	e003		 b           |$LN2@ProcessPnP|
  00094		 |$LN3@ProcessPnP|

; 61   :                 RemoveDevice(&pDevDetail->guidDevClass, pDevDetail->szName);

  00094	a90b		 add         r1,sp,#0x2C
  00096	a804		 add         r0,sp,#0x10
  00098	f000 f800	 bl          RemoveDevice
  0009c		 |$LN2@ProcessPnP|

; 62   :             }
; 63   :             fOk = TRUE;

  0009c	2501		 movs        r5,#1
  0009e	e012		 b           |$LN19@ProcessPnP|
  000a0		 |$LN8@ProcessPnP|

; 46   :             PMLOGMSG(ZONE_WARN, (_T("%s: device name longer than %d characters\r\n"), 
; 47   :                 pszFname, PNP_MAX_NAMELEN - 1));

  000a0	4b0e		 ldr         r3,|$LN33@ProcessPnP| ; =|dpCurSettings|
  000a2	f8d3 3440	 ldr         r3,[r3,#0x440]
  000a6	f013 0f02	 tst         r3,#2
  000aa	d00c		 beq         |$LN19@ProcessPnP|
  000ac	480c		 ldr         r0,|$LN34@ProcessPnP| ; =|??_C@_1FI@ONIMKDGK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?5?$AAn?$AAa?$AAm?$AAe?$AA?5?$AAl?$AAo?$AAn?$AAg?$AAe?$AAr?$AA?5?$AAt?$AAh?$AAa?$AAn?$AA?5?$AA?$CF?$AAd?$AA?5?$AAc@|
  000ae	227f		 movs        r2,#0x7F

; 64   :         }
; 65   :     } else {

  000b0	e006		 b           |$LN24@ProcessPnP|
  000b2		 |$LN10@ProcessPnP|

; 66   :         // not enough bytes for a message
; 67   :         PMLOGMSG(ZONE_WARN, (_T("%s: got runt message (%d bytes)\r\n"), pszFname, 
; 68   :             iBytesInQueue));

  000b2	4b0a		 ldr         r3,|$LN33@ProcessPnP| ; =|dpCurSettings|
  000b4	f8d3 3440	 ldr         r3,[r3,#0x440]
  000b8	f013 0f02	 tst         r3,#2
  000bc	d003		 beq         |$LN19@ProcessPnP|
  000be	4806		 ldr         r0,|$LN32@ProcessPnP| ; =|??_C@_1EE@EFOEONDD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAg?$AAo?$AAt?$AA?5?$AAr?$AAu?$AAn?$AAt?$AA?5?$AAm?$AAe?$AAs?$AAs?$AAa?$AAg?$AAe?$AA?5?$AA?$CI?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?$CJ?$AA?$AN@|
  000c0		 |$LN24@ProcessPnP|
  000c0	4904		 ldr         r1,|$LN31@ProcessPnP| ; =|??_C@_1CG@EGNINIOP@?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$AA@|
  000c2	f000 f800	 bl          CeLogMsg
  000c6		 |$LN19@ProcessPnP|

; 69   :     }
; 70   : 
; 71   :     return fOk;
; 72   : }

  000c6	4628		 mov         r0,r5
  000c8		 |$M29|
  000c8	f20d 3d70	 addw        sp,sp,#0x370
  000cc	f000 f800	 bl          __security_pop_cookie
  000d0	e8bd 8870	 pop         {r4-r6,r11,pc}
  000d4		 |$LN30@ProcessPnP|
  000d4		 |$LN31@ProcessPnP|
  000d4	0000 0000	 DCD         |??_C@_1CG@EGNINIOP@?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$AA@|
  000d8		 |$LN32@ProcessPnP|
  000d8	0000 0000	 DCD         |??_C@_1EE@EFOEONDD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAg?$AAo?$AAt?$AA?5?$AAr?$AAu?$AAn?$AAt?$AA?5?$AAm?$AAe?$AAs?$AAs?$AAa?$AAg?$AAe?$AA?5?$AA?$CI?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?$CJ?$AA?$AN@|
  000dc		 |$LN33@ProcessPnP|
  000dc	0000 0000	 DCD         |dpCurSettings|
  000e0		 |$LN34@ProcessPnP|
  000e0	0000 0000	 DCD         |??_C@_1FI@ONIMKDGK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAd?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?5?$AAn?$AAa?$AAm?$AAe?$AA?5?$AAl?$AAo?$AAn?$AAg?$AAe?$AAr?$AA?5?$AAt?$AAh?$AAa?$AAn?$AA?5?$AA?$CF?$AAd?$AA?5?$AAc@|
  000e4		 |$LN35@ProcessPnP|
  000e4	0000 0000	 DCD         |??_C@_1DO@DCJBELBH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAa?$AAd?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000e8		 |$M27|

			 ENDP  ; |?ProcessPnPMsgQueue@@YAHPAX@Z|, ProcessPnPMsgQueue

	EXPORT	|??_C@_1CK@KPKINJCK@?$AA?$CL?$AA?$CF?$AAs?$AA?3?$AA?5?$AAt?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BO@OBACGECJ@?$AAP?$AAn?$AAP?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@FFHKOOHH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$CI?$AA?$CJ@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FA@PABKGHKA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DC@FJNGMGD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAh?$AAu?$AAt?$AAd?$AAo?$AAw?$AAn?$AA?5?$AAe?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAs?$AAe?$AAt?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HC@LPAHHGNK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAM?$AAu?$AAl?$AAt?$AAi?$AAp?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AAs?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BO@HFODHNIK@?$AA?9?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|PnpThreadProc|
	IMPORT	|GetPMThreadPriority|
	IMPORT	|CeSetThreadPriority|
	IMPORT	|ghevPmShutdown|
	IMPORT	|gpDeviceLists|
	IMPORT	|RequestDeviceNotifications|
	IMPORT	|ghevPowerManagerReady|
	IMPORT	|WaitForMultipleObjects|
	IMPORT	|StopDeviceNotifications|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$PnpThreadProc| DCD imagerel |$LN58@PnpThreadP|
	DCD	0x117602a5

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BO@HFODHNIK@?$AA?9?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "%", 0x0, "s", 0x0, ":", 0x0, " ", 0x0, "e", 0x0, "x"
	DCB	0x0, "i", 0x0, "t", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HC@LPAHHGNK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAM?$AAu?$AAl?$AAt?$AAi?$AAp?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AAs?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "W", 0x0, "a", 0x0, "i"
	DCB	0x0, "t", 0x0, "F", 0x0, "o", 0x0, "r", 0x0, "M", 0x0, "u"
	DCB	0x0, "l", 0x0, "t", 0x0, "i", 0x0, "p", 0x0, "l", 0x0, "e"
	DCB	0x0, "O", 0x0, "b", 0x0, "j", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, "s", 0x0, "(", 0x0, ")", 0x0, " ", 0x0, "r", 0x0, "e"
	DCB	0x0, "t", 0x0, "u", 0x0, "r", 0x0, "n", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "s"
	DCB	0x0, "t", 0x0, "a", 0x0, "t", 0x0, "u", 0x0, "s", 0x0, " "
	DCB	0x0, "i", 0x0, "s", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DC@FJNGMGD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAh?$AAu?$AAt?$AAd?$AAo?$AAw?$AAn?$AA?5?$AAe?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAs?$AAe?$AAt?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "s", 0x0, "h", 0x0, "u"
	DCB	0x0, "t", 0x0, "d", 0x0, "o", 0x0, "w", 0x0, "n", 0x0, " "
	DCB	0x0, "e", 0x0, "v", 0x0, "e", 0x0, "n", 0x0, "t", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "t", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FA@PABKGHKA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "P", 0x0, "r", 0x0, "o"
	DCB	0x0, "c", 0x0, "e", 0x0, "s", 0x0, "s", 0x0, "P", 0x0, "n"
	DCB	0x0, "P", 0x0, "M", 0x0, "s", 0x0, "g", 0x0, "Q", 0x0, "u"
	DCB	0x0, "e", 0x0, "u", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@FFHKOOHH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$CI?$AA?$CJ@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "R", 0x0, "e", 0x0, "q"
	DCB	0x0, "u", 0x0, "e", 0x0, "s", 0x0, "t", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, "N", 0x0, "o"
	DCB	0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c", 0x0, "a"
	DCB	0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, "s", 0x0, "("
	DCB	0x0, ")", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BO@OBACGECJ@?$AAP?$AAn?$AAP?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@| DCB "P"
	DCB	0x0, "n", 0x0, "P", 0x0, "P", 0x0, "r", 0x0, "i", 0x0, "o"
	DCB	0x0, "r", 0x0, "i", 0x0, "t", 0x0, "y", 0x0, "2", 0x0, "5"
	DCB	0x0, "6", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@| DCB "P"
	DCB	0x0, "n", 0x0, "p", 0x0, "T", 0x0, "h", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "d", 0x0, "P", 0x0, "r", 0x0, "o", 0x0, "c"
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@KPKINJCK@?$AA?$CL?$AA?$CF?$AAs?$AA?3?$AA?5?$AAt?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "%", 0x0, "s", 0x0, ":", 0x0, " ", 0x0, "t", 0x0, "h"
	DCB	0x0, "r", 0x0, "e", 0x0, "a", 0x0, "d", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp
; File c:\wince800\public\common\sdk\inc\kfuncs.h
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp
; File c:\wince800\public\common\sdk\inc\kfuncs.h
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp
; File c:\wince800\public\common\sdk\inc\kfuncs.h
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |PnpThreadProc| PROC

; 81   : {

  00000		 |$LN58@PnpThreadP|
  00000	e92d 4ff0	 push        {r4-r11,lr}
  00004	f20d 0b1c	 addw        r11,sp,#0x1C
  00008	b0c5		 sub         sp,sp,#0x114
  0000a		 |$M56|

; 92   :     PMLOGMSG(ZONE_INIT, (_T("+%s: thread 0x%08x\r\n"), pszFname, GetCurrentThreadId()));

  0000a	4d5d		 ldr         r5,|$LN72@PnpThreadP| ; =|dpCurSettings|
  0000c	4682		 mov         r10,r0
  0000e	f8d5 3440	 ldr         r3,[r5,#0x440]
  00012	f013 0f04	 tst         r3,#4
  00016	d007		 beq         |$LN21@PnpThreadP|
; File c:\wince800\public\common\sdk\inc\kfuncs.h

; 372  :     return __GetUserKData (SYSHANDLE_OFFSET + (SH_CURTHREAD * sizeof(HANDLE)));

  00018	2008		 movs        r0,#8
  0001a	f000 f800	 bl          __GetUserKData
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp

; 92   :     PMLOGMSG(ZONE_INIT, (_T("+%s: thread 0x%08x\r\n"), pszFname, GetCurrentThreadId()));

  0001e	494d		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
; File c:\wince800\public\common\sdk\inc\kfuncs.h

; 372  :     return __GetUserKData (SYSHANDLE_OFFSET + (SH_CURTHREAD * sizeof(HANDLE)));

  00020	4602		 mov         r2,r0
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp

; 92   :     PMLOGMSG(ZONE_INIT, (_T("+%s: thread 0x%08x\r\n"), pszFname, GetCurrentThreadId()));

  00022	4856		 ldr         r0,|$LN71@PnpThreadP| ; =|??_C@_1CK@KPKINJCK@?$AA?$CL?$AA?$CF?$AAs?$AA?3?$AA?5?$AAt?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00024	f000 f800	 bl          CeLogMsg
  00028		 |$LN21@PnpThreadP|

; 93   : 
; 94   :     // set the thread priority
; 95   :     if(!GetPMThreadPriority(_T("PnPPriority256"), &iPriority)) {

  00028	4853		 ldr         r0,|$LN70@PnpThreadP| ; =|??_C@_1BO@OBACGECJ@?$AAP?$AAn?$AAP?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@|
  0002a	4669		 mov         r1,sp
  0002c	f000 f800	 bl          GetPMThreadPriority
  00030	b910		 cbnz        r0,|$LN51@PnpThreadP|

; 96   :         iPriority = DEF_PNP_THREAD_PRIORITY;

  00032	21f9		 movs        r1,#0xF9
  00034	9100		 str         r1,[sp]
  00036	e000		 b           |$LN18@PnpThreadP|
  00038		 |$LN51@PnpThreadP|
  00038	9900		 ldr         r1,[sp]
  0003a		 |$LN18@PnpThreadP|

; 97   :     }
; 98   :     CeSetThreadPriority(GetCurrentThread(), iPriority);

  0003a	2041		 movs        r0,#0x41
  0003c	f000 f800	 bl          CeSetThreadPriority

; 99   : 
; 100  :     // first list entry is the exit event
; 101  :     hEvents[dwNumEvents++] = ghevPmShutdown;

  00040	f8df 8130	 ldr         r8,|$LN69@PnpThreadP| ; =|ghevPmShutdown|

; 102  : 
; 103  :     // set up device notifications
; 104  :     for(pdl = gpDeviceLists; pdl != NULL && dwNumEvents < _countof(hEvents); pdl = pdl->pNext) {

  00044	f8df 9128	 ldr         r9,|$LN68@PnpThreadP| ; =|gpDeviceLists|
  00048	2701		 movs        r7,#1
  0004a	f8d8 3000	 ldr         r3,[r8]
  0004e	f8d9 4000	 ldr         r4,[r9]
  00052	9304		 str         r3,[sp,#0x10]
  00054	b1e4		 cbz         r4,|$LN53@PnpThreadP|

; 97   :     }
; 98   :     CeSetThreadPriority(GetCurrentThread(), iPriority);

  00056	ae05		 add         r6,sp,#0x14
  00058		 |$LL17@PnpThreadP|

; 102  : 
; 103  :     // set up device notifications
; 104  :     for(pdl = gpDeviceLists; pdl != NULL && dwNumEvents < _countof(hEvents); pdl = pdl->pNext) {

  00058	2f40		 cmp         r7,#0x40
  0005a	d219		 bcs         |$LN53@PnpThreadP|

; 105  :         hEvents[dwNumEvents++] = pdl->hMsgQ;

  0005c	68a3		 ldr         r3,[r4,#8]

; 106  :         pdl->hnClass = RequestDeviceNotifications(pdl->pGuid, pdl->hMsgQ, TRUE);

  0005e	2201		 movs        r2,#1
  00060	3701		 adds        r7,#1
  00062	f846 3b04	 str         r3,[r6],#4
  00066	68a1		 ldr         r1,[r4,#8]
  00068	6820		 ldr         r0,[r4]
  0006a	f000 f800	 bl          RequestDeviceNotifications
  0006e	60e0		 str         r0,[r4,#0xC]

; 107  :         if(pdl->hnClass == NULL) {

  00070	b958		 cbnz        r0,|$LN16@PnpThreadP|

; 108  :             PMLOGMSG(ZONE_WARN, (_T("%s: RequestDeviceNotifications() failed %d\r\n"),
; 109  :                 pszFname, GetLastError()));

  00072	f8d5 3440	 ldr         r3,[r5,#0x440]
  00076	f013 0f02	 tst         r3,#2
  0007a	d006		 beq         |$LN16@PnpThreadP|
  0007c	f000 f800	 bl          GetLastError
  00080	4934		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  00082	4602		 mov         r2,r0
  00084	4839		 ldr         r0,|$LN67@PnpThreadP| ; =|??_C@_1FK@FFHKOOHH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$CI?$AA?$CJ@|
  00086	f000 f800	 bl          CeLogMsg
  0008a		 |$LN16@PnpThreadP|

; 102  : 
; 103  :     // set up device notifications
; 104  :     for(pdl = gpDeviceLists; pdl != NULL && dwNumEvents < _countof(hEvents); pdl = pdl->pNext) {

  0008a	6964		 ldr         r4,[r4,#0x14]
  0008c	2c00		 cmp         r4,#0
  0008e	d1e3		 bne         |$LL17@PnpThreadP|
  00090		 |$LN53@PnpThreadP|
; File c:\wince800\public\common\sdk\inc\kfuncs.h

; 244  :     return EventModify(h,EVENT_SET);

  00090	2103		 movs        r1,#3
  00092	4650		 mov         r0,r10
  00094	f000 f800	 bl          EventModify
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmpnp.cpp

; 117  :     HANDLE hInit[2] = {ghevPowerManagerReady, ghevPmShutdown};

  00098	4b33		 ldr         r3,|$LN66@PnpThreadP| ; =|ghevPowerManagerReady|

; 118  :     fDone = (WaitForMultipleObjects(_countof(hInit), hInit, FALSE, INFINITE)!= WAIT_OBJECT_0);

  0009a	a902		 add         r1,sp,#8
  0009c	2200		 movs        r2,#0
  0009e	681b		 ldr         r3,[r3]
  000a0	2002		 movs        r0,#2
  000a2	9302		 str         r3,[sp,#8]
  000a4	f8d8 3000	 ldr         r3,[r8]
  000a8	9303		 str         r3,[sp,#0xC]
  000aa	f06f 0300	 mvn         r3,#0
  000ae	f000 f800	 bl          WaitForMultipleObjects
  000b2	bbb8		 cbnz        r0,|$LN52@PnpThreadP|
  000b4	ae04		 add         r6,sp,#0x10
  000b6		 |$LL13@PnpThreadP|

; 119  : 
; 120  :     // wait for new devices to arrive
; 121  :     while(!fDone) {
; 122  :         dwStatus = WaitForMultipleObjects(dwNumEvents, hEvents, FALSE, INFINITE);

  000b6	f06f 0300	 mvn         r3,#0
  000ba	2200		 movs        r2,#0
  000bc	a904		 add         r1,sp,#0x10
  000be	4638		 mov         r0,r7
  000c0	f000 f800	 bl          WaitForMultipleObjects
  000c4	4604		 mov         r4,r0

; 123  :         if(dwStatus == (WAIT_OBJECT_0 + 0)) {

  000c6	b324		 cbz         r4,|$LN50@PnpThreadP|

; 125  :             fDone = TRUE;
; 126  :         } else if(dwStatus > WAIT_OBJECT_0 && dwStatus <= (WAIT_OBJECT_0 + MAXIMUM_WAIT_OBJECTS)) { 

  000c8	1e63		 subs        r3,r4,#1
  000ca	2b3f		 cmp         r3,#0x3F
  000cc	d813		 bhi         |$LN9@PnpThreadP|

; 127  :             dwStatus -= WAIT_OBJECT_0;
; 128  :             if (dwStatus < MAXIMUM_WAIT_OBJECTS) {

  000ce	2c40		 cmp         r4,#0x40
  000d0	d2f1		 bcs         |$LL13@PnpThreadP|

; 129  :                 fOk = ProcessPnPMsgQueue(hEvents[dwStatus]);

  000d2	f856 0020	 ldr         r0,[r6,r0,lsl #2]
  000d6	f000 f800	 bl          |?ProcessPnPMsgQueue@@YAHPAX@Z|

; 130  :                 if(!fOk) {

  000da	2800		 cmp         r0,#0
  000dc	d1eb		 bne         |$LL13@PnpThreadP|

; 131  :                     PMLOGMSG(ZONE_WARN, (_T("%s: ProcessPnPMsgQueue(0x%08x) failed\r\n"), pszFname,
; 132  :                         hEvents[dwStatus]));

  000de	f8d5 3440	 ldr         r3,[r5,#0x440]
  000e2	f013 0f02	 tst         r3,#2
  000e6	d0e6		 beq         |$LL13@PnpThreadP|
  000e8	f856 2024	 ldr         r2,[r6,r4,lsl #2]
  000ec	4919		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  000ee	481d		 ldr         r0,|$LN65@PnpThreadP| ; =|??_C@_1FA@PABKGHKA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf@|
  000f0	f000 f800	 bl          CeLogMsg
  000f4	e7df		 b           |$LL13@PnpThreadP|
  000f6		 |$LN9@PnpThreadP|

; 124  :             PMLOGMSG(ZONE_WARN, (_T("%s: shutdown event set\r\n"), pszFname));

  000f6	f8d5 3440	 ldr         r3,[r5,#0x440]

; 133  :                 }
; 134  :             } else {
; 135  :                 ASSERT(FALSE);
; 136  :             }
; 137  :         } else {
; 138  :             PMLOGMSG(ZONE_WARN, (_T("%s: WaitForMultipleObjects() returned %d, status is %d\r\n"),
; 139  :                 pszFname, dwStatus, GetLastError())); 

  000fa	f013 0f02	 tst         r3,#2
  000fe	d011		 beq         |$LN52@PnpThreadP|
  00100	f000 f800	 bl          GetLastError
  00104	4913		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  00106	4603		 mov         r3,r0
  00108	4815		 ldr         r0,|$LN64@PnpThreadP| ; =|??_C@_1HC@LPAHHGNK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAM?$AAu?$AAl?$AAt?$AAi?$AAp?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AAs?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt@|
  0010a	4622		 mov         r2,r4
  0010c	f000 f800	 bl          CeLogMsg
  00110	e008		 b           |$LN52@PnpThreadP|
  00112		 |$LN50@PnpThreadP|

; 124  :             PMLOGMSG(ZONE_WARN, (_T("%s: shutdown event set\r\n"), pszFname));

  00112	f8d5 3440	 ldr         r3,[r5,#0x440]
  00116	f013 0f02	 tst         r3,#2
  0011a	d003		 beq         |$LN52@PnpThreadP|
  0011c	480f		 ldr         r0,|$LN63@PnpThreadP| ; =|??_C@_1DC@FJNGMGD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAh?$AAu?$AAt?$AAd?$AAo?$AAw?$AAn?$AA?5?$AAe?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAs?$AAe?$AAt?$AA?$AN?$AA?6?$AA?$AA@|
  0011e	490d		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  00120	f000 f800	 bl          CeLogMsg
  00124		 |$LN52@PnpThreadP|

; 140  :             fDone = TRUE;
; 141  :             break;
; 142  :         }
; 143  :     }
; 144  : 
; 145  :     // release resources
; 146  :     for(pdl = gpDeviceLists; pdl != NULL; pdl = pdl->pNext) {

  00124	f8d9 4000	 ldr         r4,[r9]
  00128	e004		 b           |$LN54@PnpThreadP|
  0012a		 |$LL4@PnpThreadP|

; 147  :         if(pdl->hnClass != NULL) StopDeviceNotifications(pdl->hnClass);

  0012a	68e0		 ldr         r0,[r4,#0xC]
  0012c	b108		 cbz         r0,|$LN3@PnpThreadP|
  0012e	f000 f800	 bl          StopDeviceNotifications
  00132		 |$LN3@PnpThreadP|

; 140  :             fDone = TRUE;
; 141  :             break;
; 142  :         }
; 143  :     }
; 144  : 
; 145  :     // release resources
; 146  :     for(pdl = gpDeviceLists; pdl != NULL; pdl = pdl->pNext) {

  00132	6964		 ldr         r4,[r4,#0x14]
  00134		 |$LN54@PnpThreadP|
  00134	2c00		 cmp         r4,#0
  00136	d1f8		 bne         |$LL4@PnpThreadP|

; 148  :     }
; 149  : 
; 150  :     // all done
; 151  :     PMLOGMSG(ZONE_INIT | ZONE_WARN, (_T("-%s: exiting\r\n"), pszFname));

  00138	f8d5 3440	 ldr         r3,[r5,#0x440]
  0013c	f013 0f06	 tst         r3,#6
  00140	d003		 beq         |$LN33@PnpThreadP|
  00142	4805		 ldr         r0,|$LN62@PnpThreadP| ; =|??_C@_1BO@HFODHNIK@?$AA?9?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?$AN?$AA?6?$AA?$AA@|
  00144	4903		 ldr         r1,|$LN61@PnpThreadP| ; =|??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  00146	f000 f800	 bl          CeLogMsg
  0014a		 |$LN33@PnpThreadP|

; 152  :     return 0;

  0014a	2000		 movs        r0,#0
  0014c		 |$M59|

; 153  : }

  0014c	b045		 add         sp,sp,#0x114
  0014e	e8bd 8ff0	 pop         {r4-r11,pc}
  00152		 |$LN73@PnpThreadP|
  00152		 |$M74|
  00152	defe		 __debugbreak
  00154		 |$LN60@PnpThreadP|
  00154		 |$LN61@PnpThreadP|
  00154	0000 0000	 DCD         |??_C@_1BM@DAIDPNHH@?$AAP?$AAn?$AAp?$AAT?$AAh?$AAr?$AAe?$AAa?$AAd?$AAP?$AAr?$AAo?$AAc?$AA?$AA@|
  00158		 |$LN62@PnpThreadP|
  00158	0000 0000	 DCD         |??_C@_1BO@HFODHNIK@?$AA?9?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?$AN?$AA?6?$AA?$AA@|
  0015c		 |$LN63@PnpThreadP|
  0015c	0000 0000	 DCD         |??_C@_1DC@FJNGMGD@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAs?$AAh?$AAu?$AAt?$AAd?$AAo?$AAw?$AAn?$AA?5?$AAe?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAs?$AAe?$AAt?$AA?$AN?$AA?6?$AA?$AA@|
  00160		 |$LN64@PnpThreadP|
  00160	0000 0000	 DCD         |??_C@_1HC@LPAHHGNK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAM?$AAu?$AAl?$AAt?$AAi?$AAp?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AAs?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt@|
  00164		 |$LN65@PnpThreadP|
  00164	0000 0000	 DCD         |??_C@_1FA@PABKGHKA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAP?$AAr?$AAo?$AAc?$AAe?$AAs?$AAs?$AAP?$AAn?$AAP?$AAM?$AAs?$AAg?$AAQ?$AAu?$AAe?$AAu?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf@|
  00168		 |$LN66@PnpThreadP|
  00168	0000 0000	 DCD         |ghevPowerManagerReady|
  0016c		 |$LN67@PnpThreadP|
  0016c	0000 0000	 DCD         |??_C@_1FK@FFHKOOHH@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?$CI?$AA?$CJ@|
  00170		 |$LN68@PnpThreadP|
  00170	0000 0000	 DCD         |gpDeviceLists|
  00174		 |$LN69@PnpThreadP|
  00174	0000 0000	 DCD         |ghevPmShutdown|
  00178		 |$LN70@PnpThreadP|
  00178	0000 0000	 DCD         |??_C@_1BO@OBACGECJ@?$AAP?$AAn?$AAP?$AAP?$AAr?$AAi?$AAo?$AAr?$AAi?$AAt?$AAy?$AA2?$AA5?$AA6?$AA?$AA@|
  0017c		 |$LN71@PnpThreadP|
  0017c	0000 0000	 DCD         |??_C@_1CK@KPKINJCK@?$AA?$CL?$AA?$CF?$AAs?$AA?3?$AA?5?$AAt?$AAh?$AAr?$AAe?$AAa?$AAd?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00180		 |$LN72@PnpThreadP|
  00180	0000 0000	 DCD         |dpCurSettings|
  00184		 |$M57|

			 ENDP  ; |PnpThreadProc|

	END
