; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.114 

	TTL	C:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmdisplay.cpp
	THUMB

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|gDisplayInterface| [ DATA ]

  00000			 AREA	 |.bss|, NOINIT
|gpfnCreateDCW| % 0x4
|gpfnDeleteDC| % 0x4
|gpfnExtEscape| % 0x4
|gfGwesReady| %	0x4

  00000			 AREA	 |.data|, DATA
|gDisplayInterface| DCD |?InitDisplayDeviceInterface@@YAHXZ|
	DCD	|?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z|
	DCD	|?CloseDisplayDevice@@YAHPAX@Z|
	DCD	|?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z|
	IMPORT	|__security_push_cookie|
	IMPORT	|__security_pop_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|StringCchVPrintfW|
	IMPORT	|StringCchLengthW|
	IMPORT	|CeLogData|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$CeLogMsg| DCD imagerel |$LN8@CeLogMsg|
	DCD	imagerel |$unwind2$CeLogMsg|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$CeLogMsg| DCD 0x44b00032
	DCD	0x1e889e8
	DCD	0x400a8fb
	DCD	0x8801e8ff
	DCD	0xff05ef00
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffe5
; Function compile flags: /Ogsp
; File c:\wince800\public\common\sdk\inc\celog.h

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |CeLogMsg| PROC

; 1208 : {

  00000		 |$LN8@CeLogMsg|
  00000	b40f		 push        {r0-r3}
  00002	e92d 4800	 push        {r11,lr}
  00006	46eb		 mov         r11,sp
  00008	f000 f800	 bl          __security_push_cookie
  0000c	f2ad 2d24	 subw        sp,sp,#0x224
  00010		 |$M6|
  00010	4602		 mov         r2,r0

; 1209 :     va_list arglist;
; 1210 :     WCHAR   szTemp[MAX_PATH];
; 1211 :     size_t  cchLen;
; 1212 :     HRESULT hr;
; 1213 : 
; 1214 :     // Compose a single string using the input args
; 1215 :     va_start(arglist, szFormat);
; 1216 :     hr = StringCchVPrintfW(szTemp, MAX_PATH, szFormat, arglist);

  00012	a806		 add         r0,sp,#0x18
  00014	ab8d		 add         r3,sp,#0x234
  00016	f44f 7182	 mov         r1,#0x104
  0001a	928c		 str         r2,[sp,#0x230]
  0001c	f000 f800	 bl          StringCchVPrintfW

; 1217 :     if (SUCCEEDED(hr)) {

  00020	2800		 cmp         r0,#0
  00022	db17		 blt         |$LN1@CeLogMsg|

; 1218 :         hr = StringCchLengthW(szTemp, MAX_PATH, &cchLen);

  00024	aa04		 add         r2,sp,#0x10
  00026	a806		 add         r0,sp,#0x18
  00028	f44f 7182	 mov         r1,#0x104
  0002c	f000 f800	 bl          StringCchLengthW

; 1219 :         if (SUCCEEDED(hr)) {

  00030	2800		 cmp         r0,#0
  00032	db0f		 blt         |$LN1@CeLogMsg|

; 1220 :             CeLogData(TRUE, CELID_RAW_WCHAR, szTemp, (WORD)((cchLen + 1) * sizeof(WCHAR)),
; 1221 :                       0, CELZONE_ALWAYSON, 0, FALSE);

  00034	f04f 4380	 mov         r3,#0x40000000
  00038	9301		 str         r3,[sp,#4]
  0003a	9b04		 ldr         r3,[sp,#0x10]
  0003c	2200		 movs        r2,#0
  0003e	9203		 str         r2,[sp,#0xC]
  00040	3301		 adds        r3,#1
  00042	005b		 lsls        r3,r3,#1
  00044	9202		 str         r2,[sp,#8]
  00046	9200		 str         r2,[sp]
  00048	aa06		 add         r2,sp,#0x18
  0004a	214a		 movs        r1,#0x4A
  0004c	b29b		 uxth        r3,r3
  0004e	2001		 movs        r0,#1
  00050	f000 f800	 bl          CeLogData
  00054		 |$LN1@CeLogMsg|
  00054		 |$M9|

; 1222 :         }
; 1223 :     }
; 1224 : }

  00054	f20d 2d24	 addw        sp,sp,#0x224
  00058	f000 f800	 bl          __security_pop_cookie
  0005c	f85d bb04	 pop         {r11}
  00060	f85d fb14	 ldr         pc,[sp],#0x14
  00064		 |$M7|

			 ENDP  ; |CeLogMsg|

	EXPORT	|??_C@_1DC@NLFIAHNJ@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAC?$AAA?$AAP?$AAA?$AAB?$AAI?$AAL?$AAI?$AAT?$AAI?$AAE?$AAS?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CA@NEAJAFDG@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAG?$AAE?$AAT?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CA@CMPIDKOH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CE@CONJIH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAQ?$AAU?$AAE?$AAR?$AAY?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@EJIINHMD@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAR?$AAE?$AAG?$AAI?$AAS?$AAT?$AAE?$AAR?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAR?$AAE?$AAL?$AAA?$AAT?$AAI?$AAO?$AAN?$AAS?$AAH?$AAI@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BE@GFCJAFPH@?$AA?$DM?$AAU?$AAN?$AAK?$AAN?$AAO?$AAW?$AAN?$AA?$DO?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GK@FEBAAHFK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAl?$AAl?$AAi?$AAn?$AAg?$AA?5?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAw?$AA?1@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EO@MFPADMDA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAc?$AAe?$AAp?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAi?$AAn?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GO@OABAJFNF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@| [ DATA ] ; `string'
	IMPORT	|__C_specific_handler|
	IMPORT	|dpCurSettings|
	IMPORT	|GetLastError|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z| DCD imagerel |$LN38@RequestDis|
	DCD	imagerel |$unwind2$?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z| DCD 0x33300080
	DCD	0xfeaffcc7
	DCD	0xefdbff04
	DCD	0xff05
	DCD	imagerel |__C_specific_handler|
	DCD	0x1
	DCD	imagerel |$LN28@RequestDis|
	DCD	imagerel |$LN29@RequestDis|
	DCD	0x1
	DCD	imagerel |$LN25@RequestDis|

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GO@OABAJFNF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "o", 0x0, "C"
	DCB	0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o", 0x0, "l"
	DCB	0x0, "(", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, " ", 0x0, "t"
	DCB	0x0, "o", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EO@MFPADMDA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAc?$AAe?$AAp?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAi?$AAn?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "e", 0x0, "x", 0x0, "c"
	DCB	0x0, "e", 0x0, "p", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n"
	DCB	0x0, " ", 0x0, "i", 0x0, "n", 0x0, " ", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "o"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| DCB "R"
	DCB	0x0, "e", 0x0, "q", 0x0, "u", 0x0, "e", 0x0, "s", 0x0, "t"
	DCB	0x0, "D", 0x0, "i", 0x0, "s", 0x0, "p", 0x0, "l", 0x0, "a"
	DCB	0x0, "y", 0x0, "D", 0x0, "e", 0x0, "v", 0x0, "i", 0x0, "c"
	DCB	0x0, "e", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GK@FEBAAHFK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAl?$AAl?$AAi?$AAn?$AAg?$AA?5?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAw?$AA?1@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "c", 0x0, "a", 0x0, "l"
	DCB	0x0, "l", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "E"
	DCB	0x0, "x", 0x0, "t", 0x0, "E", 0x0, "s", 0x0, "c", 0x0, "a"
	DCB	0x0, "p", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, " ", 0x0, "w"
	DCB	0x0, "/", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "q", 0x0, "u"
	DCB	0x0, "e", 0x0, "s", 0x0, "t", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "(", 0x0, "'", 0x0, "%", 0x0, "s", 0x0, "'"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BE@GFCJAFPH@?$AA?$DM?$AAU?$AAN?$AAK?$AAN?$AAO?$AAW?$AAN?$AA?$DO?$AA?$AA@| DCB "<"
	DCB	0x0, "U", 0x0, "N", 0x0, "K", 0x0, "N", 0x0, "O", 0x0, "W"
	DCB	0x0, "N", 0x0, ">", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@EJIINHMD@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAR?$AAE?$AAG?$AAI?$AAS?$AAT?$AAE?$AAR?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAR?$AAE?$AAL?$AAA?$AAT?$AAI?$AAO?$AAN?$AAS?$AAH?$AAI@| DCB "I"
	DCB	0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "R"
	DCB	0x0, "E", 0x0, "G", 0x0, "I", 0x0, "S", 0x0, "T", 0x0, "E"
	DCB	0x0, "R", 0x0, "_", 0x0, "P", 0x0, "O", 0x0, "W", 0x0, "E"
	DCB	0x0, "R", 0x0, "_", 0x0, "R", 0x0, "E", 0x0, "L", 0x0, "A"
	DCB	0x0, "T", 0x0, "I", 0x0, "O", 0x0, "N", 0x0, "S", 0x0, "H"
	DCB	0x0, "I", 0x0, "P", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CE@CONJIH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAQ?$AAU?$AAE?$AAR?$AAY?$AA?$AA@| DCB "I"
	DCB	0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "P"
	DCB	0x0, "O", 0x0, "W", 0x0, "E", 0x0, "R", 0x0, "_", 0x0, "Q"
	DCB	0x0, "U", 0x0, "E", 0x0, "R", 0x0, "Y", 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CA@CMPIDKOH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?$AA@| DCB "I"
	DCB	0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "P"
	DCB	0x0, "O", 0x0, "W", 0x0, "E", 0x0, "R", 0x0, "_", 0x0, "S"
	DCB	0x0, "E", 0x0, "T", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CA@NEAJAFDG@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAG?$AAE?$AAT?$AA?$AA@| DCB "I"
	DCB	0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "P"
	DCB	0x0, "O", 0x0, "W", 0x0, "E", 0x0, "R", 0x0, "_", 0x0, "G"
	DCB	0x0, "E", 0x0, "T", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DC@NLFIAHNJ@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAC?$AAA?$AAP?$AAA?$AAB?$AAI?$AAL?$AAI?$AAT?$AAI?$AAE?$AAS?$AA?$AA@| DCB "I"
	DCB	0x0, "O", 0x0, "C", 0x0, "T", 0x0, "L", 0x0, "_", 0x0, "P"
	DCB	0x0, "O", 0x0, "W", 0x0, "E", 0x0, "R", 0x0, "_", 0x0, "C"
	DCB	0x0, "A", 0x0, "P", 0x0, "A", 0x0, "B", 0x0, "I", 0x0, "L"
	DCB	0x0, "I", 0x0, "T", 0x0, "I", 0x0, "E", 0x0, "S", 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmdisplay.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z| PROC ; RequestDisplayDevice

; 162  : {

  00000		 |$LN38@RequestDis|
  00000	b40f		 push        {r0-r3}
  00002	e92d 4ffe	 push        {r1-r11,lr}
  00006	f20d 0b28	 addw        r11,sp,#0x28
  0000a	466f		 mov         r7,sp
  0000c	b082		 sub         sp,sp,#8
  0000e		 |$LN36@RequestDis|
  0000e	607b		 str         r3,[r7,#4]
  00010	603a		 str         r2,[r7]
  00012	460d		 mov         r5,r1
  00014	637d		 str         r5,[r7,#0x34]
  00016	4681		 mov         r9,r0
  00018	6338		 str         r0,[r7,#0x30]

; 163  :     BOOL fOk = FALSE;

  0001a	2600		 movs        r6,#0
  0001c		 |$LN28@RequestDis|

; 164  :     int iStatus;
; 165  :     SETFNAME(_T("RequestDisplayDevice"));
; 166  : 
; 167  :     DEBUGCHK(gpfnCreateDCW != NULL);
; 168  :     PREFAST_DEBUGCHK(gpfnDeleteDC != NULL);
; 169  :     PREFAST_DEBUGCHK(gpfnExtEscape != NULL);
; 170  :     DEBUGCHK(hDevice != NULL && hDevice != INVALID_HANDLE_VALUE);
; 171  :     DEBUGCHK(gfGwesReady);
; 172  : 
; 173  :     __try {
; 174  :         PMLOGMSG(ZONE_IOCTL, (_T("%s: calling ExtEscape(0x%08x) w/ request %d ('%s')\r\n"),
; 175  :             pszFname, hDevice, dwRequest, 
; 176  :             dwRequest == IOCTL_POWER_CAPABILITIES ? _T("IOCTL_POWER_CAPABILITIES") 
; 177  :             : dwRequest == IOCTL_POWER_GET ? _T("IOCTL_POWER_GET") 
; 178  :             : dwRequest == IOCTL_POWER_SET ? _T("IOCTL_POWER_SET") 
; 179  :             : dwRequest == IOCTL_POWER_QUERY ? _T("IOCTL_POWER_QUERY") 
; 180  :             : dwRequest == IOCTL_REGISTER_POWER_RELATIONSHIP ? _T("IOCTL_REGISTER_POWER_RELATIONSHIP")
; 181  :             : _T("<UNKNOWN>")));

  0001c	f8df 80ec	 ldr         r8,|$LN45@RequestDis| ; =|dpCurSettings|
  00020	f8d8 4440	 ldr         r4,[r8,#0x440]
  00024	f014 0f20	 tst         r4,#0x20
  00028	d020		 beq         |$LN33@RequestDis|
  0002a	4c45		 ldr         r4,|$LN58@RequestDis| ; =0x321000
  0002c	42a5		 cmp         r5,r4
  0002e	d101		 bne         |$LN14@RequestDis|
  00030	4b42		 ldr         r3,|$LN57@RequestDis| ; =|??_C@_1DC@NLFIAHNJ@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAC?$AAA?$AAP?$AAA?$AAB?$AAI?$AAL?$AAI?$AAT?$AAI?$AAE?$AAS?$AA?$AA@|
  00032	e014		 b           |$LN7@RequestDis|
  00034		 |$LN14@RequestDis|
  00034	4b40		 ldr         r3,|$LN56@RequestDis| ; =0x321004
  00036	429d		 cmp         r5,r3
  00038	d101		 bne         |$LN12@RequestDis|
  0003a	4b3e		 ldr         r3,|$LN55@RequestDis| ; =|??_C@_1CA@NEAJAFDG@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAG?$AAE?$AAT?$AA?$AA@|
  0003c	e00f		 b           |$LN7@RequestDis|
  0003e		 |$LN12@RequestDis|
  0003e	4b3c		 ldr         r3,|$LN54@RequestDis| ; =0x321008
  00040	429d		 cmp         r5,r3
  00042	d101		 bne         |$LN10@RequestDis|
  00044	4b39		 ldr         r3,|$LN53@RequestDis| ; =|??_C@_1CA@CMPIDKOH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?$AA@|
  00046	e00a		 b           |$LN7@RequestDis|
  00048		 |$LN10@RequestDis|
  00048	4b37		 ldr         r3,|$LN52@RequestDis| ; =0x32100c
  0004a	429d		 cmp         r5,r3
  0004c	d101		 bne         |$LN8@RequestDis|
  0004e	4b35		 ldr         r3,|$LN51@RequestDis| ; =|??_C@_1CE@CONJIH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAQ?$AAU?$AAE?$AAR?$AAY?$AA?$AA@|
  00050	e005		 b           |$LN7@RequestDis|
  00052		 |$LN8@RequestDis|
  00052	4b33		 ldr         r3,|$LN50@RequestDis| ; =0x321018
  00054	429d		 cmp         r5,r3
  00056	d101		 bne         |$LN6@RequestDis|
  00058	4b30		 ldr         r3,|$LN49@RequestDis| ; =|??_C@_1EE@EJIINHMD@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAR?$AAE?$AAG?$AAI?$AAS?$AAT?$AAE?$AAR?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAR?$AAE?$AAL?$AAA?$AAT?$AAI?$AAO?$AAN?$AAS?$AAH?$AAI@|
  0005a	e000		 b           |$LN7@RequestDis|
  0005c		 |$LN6@RequestDis|
  0005c	4b2e		 ldr         r3,|$LN48@RequestDis| ; =|??_C@_1BE@GFCJAFPH@?$AA?$DM?$AAU?$AAN?$AAK?$AAN?$AAO?$AAW?$AAN?$AA?$DO?$AA?$AA@|
  0005e		 |$LN7@RequestDis|
  0005e	9300		 str         r3,[sp]
  00060	482c		 ldr         r0,|$LN47@RequestDis| ; =|??_C@_1GK@FEBAAHFK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAl?$AAl?$AAi?$AAn?$AAg?$AA?5?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAw?$AA?1@|
  00062	462b		 mov         r3,r5
  00064	464a		 mov         r2,r9
  00066	4926		 ldr         r1,|$LN42@RequestDis| ; =|??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00068	f000 f800	 bl          CeLogMsg
  0006c		 |$LN33@RequestDis|

; 182  :         iStatus = gpfnExtEscape((HDC) hDevice, dwRequest, dwInSize, (LPCSTR) pInBuf, 
; 183  :             dwOutSize, (LPSTR) pOutBuf);

  0006c	6c3b		 ldr         r3,[r7,#0x40]
  0006e	9301		 str         r3,[sp,#4]
  00070	f8d7 a044	 ldr         r10,[r7,#0x44]
  00074	f8cd a000	 str         r10,[sp]
  00078	683b		 ldr         r3,[r7]
  0007a	687a		 ldr         r2,[r7,#4]
  0007c	4629		 mov         r1,r5
  0007e	4648		 mov         r0,r9
  00080	4c23		 ldr         r4,|$LN46@RequestDis| ; =|gpfnExtEscape|
  00082	6824		 ldr         r4,[r4]
  00084	47a0		 blx         r4

; 184  :         if(iStatus > 0) {

  00086	2800		 cmp         r0,#0
  00088	dd05		 ble         |$LN29@RequestDis|

; 185  :             fOk = TRUE;

  0008a	2601		 movs        r6,#1
  0008c	60be		 str         r6,[r7,#8]

; 186  :             if(pdwBytesRet != NULL) {

  0008e	6cbb		 ldr         r3,[r7,#0x48]
  00090	b10b		 cbz         r3,|$LN29@RequestDis|

; 187  :                 // need to fill this in with something
; 188  :                 *pdwBytesRet = dwOutSize;

  00092	f8c3 a000	 str         r10,[r3]
  00096		 |$LN29@RequestDis|

; 189  :             }
; 190  :         }
; 191  :     }

  00096	f8d8 3440	 ldr         r3,[r8,#0x440]
  0009a	e017		 b           |$LN30@RequestDis|
  0009c		 |$LN25@RequestDis|

; 192  :     __except(EXCEPTION_EXECUTE_HANDLER) {
; 193  :         PMLOGMSG(ZONE_WARN || ZONE_IOCTL, (_T("%s: exception in DeviceIoControl(%d)\r\n"), pszFname,
; 194  :             dwRequest));

  0009c	f8df 806c	 ldr         r8,|$LN45@RequestDis| ; =|dpCurSettings|
  000a0	f8d8 3440	 ldr         r3,[r8,#0x440]
  000a4	f013 0f02	 tst         r3,#2
  000a8	d104		 bne         |$LN18@RequestDis|
  000aa	f013 0f20	 tst         r3,#0x20
  000ae	d101		 bne         |$LN18@RequestDis|
  000b0	6b7d		 ldr         r5,[r7,#0x34]
  000b2	e007		 b           |$LN19@RequestDis|
  000b4		 |$LN18@RequestDis|
  000b4	4814		 ldr         r0,|$LN44@RequestDis| ; =|??_C@_1EO@MFPADMDA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAc?$AAe?$AAp?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAi?$AAn?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl@|
  000b6	6b7d		 ldr         r5,[r7,#0x34]
  000b8	462a		 mov         r2,r5
  000ba	4911		 ldr         r1,|$LN42@RequestDis| ; =|??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  000bc	f000 f800	 bl          CeLogMsg
  000c0	f8d8 3440	 ldr         r3,[r8,#0x440]
  000c4		 |$LN19@RequestDis|

; 195  :         fOk = FALSE;

  000c4	2600		 movs        r6,#0
  000c6	60be		 str         r6,[r7,#8]
  000c8	f8d7 9030	 ldr         r9,[r7,#0x30]
  000cc		 |$LN30@RequestDis|

; 196  :     }
; 197  : 
; 198  :     PMLOGMSG(!fOk && (ZONE_WARN || ZONE_IOCTL), 
; 199  :         (_T("%s: DeviceIoControl(%d) to 0x%08x failed %d (0x%08x)\r\n"), pszFname,
; 200  :         dwRequest, hDevice, GetLastError(), GetLastError()));

  000cc	b996		 cbnz        r6,|$LN4@RequestDis|
  000ce	f013 0f02	 tst         r3,#2
  000d2	d102		 bne         |$LN20@RequestDis|
  000d4	f013 0f20	 tst         r3,#0x20
  000d8	d00c		 beq         |$LN4@RequestDis|
  000da		 |$LN20@RequestDis|
  000da	f000 f800	 bl          GetLastError
  000de	4604		 mov         r4,r0
  000e0	f000 f800	 bl          GetLastError
  000e4	9401		 str         r4,[sp,#4]
  000e6	9000		 str         r0,[sp]
  000e8	4806		 ldr         r0,|$LN43@RequestDis| ; =|??_C@_1GO@OABAJFNF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@|
  000ea	464b		 mov         r3,r9
  000ec	462a		 mov         r2,r5
  000ee	4904		 ldr         r1,|$LN42@RequestDis| ; =|??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  000f0	f000 f800	 bl          CeLogMsg
  000f4		 |$LN4@RequestDis|

; 201  :     return fOk;
; 202  : }

  000f4	4630		 mov         r0,r6
  000f6		 |$M40|
  000f6	b005		 add         sp,sp,#0x14
  000f8	e8bd 0ff0	 pop         {r4-r11}
  000fc	f85d fb14	 ldr         pc,[sp],#0x14
  00100		 |$LN41@RequestDis|
  00100		 |$LN42@RequestDis|
  00100	0000 0000	 DCD         |??_C@_1CK@GFBKGKH@?$AAR?$AAe?$AAq?$AAu?$AAe?$AAs?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00104		 |$LN43@RequestDis|
  00104	0000 0000	 DCD         |??_C@_1GO@OABAJFNF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA?$CF?$AAd?$AA?$CJ?$AA?5?$AAt?$AAo?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8@|
  00108		 |$LN44@RequestDis|
  00108	0000 0000	 DCD         |??_C@_1EO@MFPADMDA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAe?$AAx?$AAc?$AAe?$AAp?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAi?$AAn?$AA?5?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAo?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl@|
  0010c		 |$LN45@RequestDis|
  0010c	0000 0000	 DCD         |dpCurSettings|
  00110		 |$LN46@RequestDis|
  00110	0000 0000	 DCD         |gpfnExtEscape|
  00114		 |$LN47@RequestDis|
  00114	0000 0000	 DCD         |??_C@_1GK@FEBAAHFK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAl?$AAl?$AAi?$AAn?$AAg?$AA?5?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAw?$AA?1@|
  00118		 |$LN48@RequestDis|
  00118	0000 0000	 DCD         |??_C@_1BE@GFCJAFPH@?$AA?$DM?$AAU?$AAN?$AAK?$AAN?$AAO?$AAW?$AAN?$AA?$DO?$AA?$AA@|
  0011c		 |$LN49@RequestDis|
  0011c	0000 0000	 DCD         |??_C@_1EE@EJIINHMD@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAR?$AAE?$AAG?$AAI?$AAS?$AAT?$AAE?$AAR?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAR?$AAE?$AAL?$AAA?$AAT?$AAI?$AAO?$AAN?$AAS?$AAH?$AAI@|
  00120		 |$LN50@RequestDis|
  00120	1018 0032	 DCD         0x321018
  00124		 |$LN51@RequestDis|
  00124	0000 0000	 DCD         |??_C@_1CE@CONJIH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAQ?$AAU?$AAE?$AAR?$AAY?$AA?$AA@|
  00128		 |$LN52@RequestDis|
  00128	100c 0032	 DCD         0x32100c
  0012c		 |$LN53@RequestDis|
  0012c	0000 0000	 DCD         |??_C@_1CA@CMPIDKOH@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAS?$AAE?$AAT?$AA?$AA@|
  00130		 |$LN54@RequestDis|
  00130	1008 0032	 DCD         0x321008
  00134		 |$LN55@RequestDis|
  00134	0000 0000	 DCD         |??_C@_1CA@NEAJAFDG@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAG?$AAE?$AAT?$AA?$AA@|
  00138		 |$LN56@RequestDis|
  00138	1004 0032	 DCD         0x321004
  0013c		 |$LN57@RequestDis|
  0013c	0000 0000	 DCD         |??_C@_1DC@NLFIAHNJ@?$AAI?$AAO?$AAC?$AAT?$AAL?$AA_?$AAP?$AAO?$AAW?$AAE?$AAR?$AA_?$AAC?$AAA?$AAP?$AAA?$AAB?$AAI?$AAL?$AAI?$AAT?$AAI?$AAE?$AAS?$AA?$AA@|
  00140		 |$LN58@RequestDis|
  00140	1000 0032	 DCD         0x321000

			 ENDP  ; |?RequestDisplayDevice@@YAHPAXK0K0KPAK@Z|, RequestDisplayDevice

  00144		 |$LN37@RequestDis|
	EXPORT	|??_C@_1CK@OHDAKAFA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAl?$AAo?$AAs?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CG@KPJCBOPI@?$AAC?$AAl?$AAo?$AAs?$AAe?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FE@DCIDGGHM@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$?CloseDisplayDevice@@YAHPAX@Z| DCD imagerel |$LN11@CloseDispl|
	DCD	0xfdb260c1

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FE@DCIDGGHM@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "D", 0x0, "e", 0x0, "l"
	DCB	0x0, "e", 0x0, "t", 0x0, "e", 0x0, "D", 0x0, "C", 0x0, "("
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ")", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, " "
	DCB	0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CG@KPJCBOPI@?$AAC?$AAl?$AAo?$AAs?$AAe?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| DCB "C"
	DCB	0x0, "l", 0x0, "o", 0x0, "s", 0x0, "e", 0x0, "D", 0x0, "i"
	DCB	0x0, "s", 0x0, "p", 0x0, "l", 0x0, "a", 0x0, "y", 0x0, "D"
	DCB	0x0, "e", 0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@OHDAKAFA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAl?$AAo?$AAs?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "c", 0x0, "l", 0x0, "o"
	DCB	0x0, "s", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmdisplay.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |?CloseDisplayDevice@@YAHPAX@Z| PROC	; CloseDisplayDevice

; 141  : {

  00000		 |$LN11@CloseDispl|
  00000	e92d 487e	 push        {r1-r6,r11,lr}
  00004	f20d 0b18	 addw        r11,sp,#0x18
  00008		 |$M9|

; 142  :     SETFNAME(_T("CloseDisplayDevice"));
; 143  : 
; 144  :     DEBUGCHK(gpfnCreateDCW != NULL);
; 145  :     DEBUGCHK(gpfnDeleteDC != NULL);
; 146  :     DEBUGCHK(gpfnExtEscape != NULL);
; 147  :     DEBUGCHK(hDevice != NULL && hDevice != INVALID_HANDLE_VALUE);
; 148  :     DEBUGCHK(gfGwesReady);
; 149  : 
; 150  :     PMLOGMSG(ZONE_DEVICE || ZONE_IOCTL, (_T("%s: closing 0x%08x\r\n"), pszFname, hDevice));

  00008	4c19		 ldr         r4,|$LN18@CloseDispl| ; =|dpCurSettings|
  0000a	4606		 mov         r6,r0
  0000c	f8d4 3440	 ldr         r3,[r4,#0x440]
  00010	f013 0f10	 tst         r3,#0x10
  00014	d102		 bne         |$LN3@CloseDispl|
  00016	f013 0f20	 tst         r3,#0x20
  0001a	d004		 beq         |$LN4@CloseDispl|
  0001c		 |$LN3@CloseDispl|
  0001c	4813		 ldr         r0,|$LN17@CloseDispl| ; =|??_C@_1CK@OHDAKAFA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAl?$AAo?$AAs?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  0001e	4911		 ldr         r1,|$LN15@CloseDispl| ; =|??_C@_1CG@KPJCBOPI@?$AAC?$AAl?$AAo?$AAs?$AAe?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00020	4632		 mov         r2,r6
  00022	f000 f800	 bl          CeLogMsg
  00026		 |$LN4@CloseDispl|

; 151  :     BOOL fOk = gpfnDeleteDC((HDC) hDevice);

  00026	4b10		 ldr         r3,|$LN16@CloseDispl| ; =|gpfnDeleteDC|
  00028	4630		 mov         r0,r6
  0002a	681b		 ldr         r3,[r3]
  0002c	4798		 blx         r3
  0002e	4605		 mov         r5,r0

; 152  :     PMLOGMSG(!fOk && (ZONE_WARN || ZONE_IOCTL), (_T("%s: DeleteDC(0x%08x) failed %d (0x%08x)\r\n"), pszFname,
; 153  :         hDevice, GetLastError(), GetLastError()));

  00030	b99d		 cbnz        r5,|$LN6@CloseDispl|
  00032	f8d4 3440	 ldr         r3,[r4,#0x440]
  00036	f013 0f02	 tst         r3,#2
  0003a	d102		 bne         |$LN5@CloseDispl|
  0003c	f013 0f20	 tst         r3,#0x20
  00040	d00b		 beq         |$LN6@CloseDispl|
  00042		 |$LN5@CloseDispl|
  00042	f000 f800	 bl          GetLastError
  00046	4604		 mov         r4,r0
  00048	f000 f800	 bl          GetLastError
  0004c	4905		 ldr         r1,|$LN15@CloseDispl| ; =|??_C@_1CG@KPJCBOPI@?$AAC?$AAl?$AAo?$AAs?$AAe?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  0004e	4603		 mov         r3,r0
  00050	4803		 ldr         r0,|$LN14@CloseDispl| ; =|??_C@_1FE@DCIDGGHM@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI@|
  00052	4632		 mov         r2,r6
  00054	9400		 str         r4,[sp]
  00056	f000 f800	 bl          CeLogMsg
  0005a		 |$LN6@CloseDispl|

; 154  :     return fOk;
; 155  : }

  0005a	4628		 mov         r0,r5
  0005c		 |$M12|
  0005c	e8bd 887e	 pop         {r1-r6,r11,pc}
  00060		 |$LN13@CloseDispl|
  00060		 |$LN14@CloseDispl|
  00060	0000 0000	 DCD         |??_C@_1FE@DCIDGGHM@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI@|
  00064		 |$LN15@CloseDispl|
  00064	0000 0000	 DCD         |??_C@_1CG@KPJCBOPI@?$AAC?$AAl?$AAo?$AAs?$AAe?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00068		 |$LN16@CloseDispl|
  00068	0000 0000	 DCD         |gpfnDeleteDC|
  0006c		 |$LN17@CloseDispl|
  0006c	0000 0000	 DCD         |??_C@_1CK@OHDAKAFA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAl?$AAo?$AAs?$AAi?$AAn?$AAg?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00070		 |$LN18@CloseDispl|
  00070	0000 0000	 DCD         |dpCurSettings|
  00074		 |$M10|

			 ENDP  ; |?CloseDisplayDevice@@YAHPAX@Z|, CloseDisplayDevice

	EXPORT	|??_C@_1EK@KLGFKKGB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAw?$AAa?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAt?$AAo?$AA?5?$AAi?$AAn?$AAi?$AAt?$AAi?$AAa?$AAl?$AAi@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IO@GLEDLCJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAS?$AAi?$AAn?$AAg?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DM@KCHPFGBA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAA?$AAP?$AAI?$AA?5?$AAs?$AAe?$AAt?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAy?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FA@LMOJFAIF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI?$AA0?$AAx@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HG@BLPIKJJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAd?$AAo?$AAe?$AAs?$AAn?$AA?8?$AAt?$AA?5?$AAs?$AAu?$AAp?$AAp?$AAo?$AAr?$AAt?$AA?5?$AAa?$AAl?$AAl?$AA?5?$AAp?$AAo?$AAw@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DO@PDLLAHEA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAt?$AAo?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|WaitForAPIReady|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z| DCD imagerel |$LN36@OpenDispla|
	DCD	imagerel |$unwind2$?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z|

  00000			 AREA	 |.xdata|, DATA
|$unwind2$?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z| DCD 0x3330009c
	DCD	0xfc01e806
	DCD	0x1e8ffdf
	DCD	0xffdf
	DCD	imagerel |__GSHandlerCheck|
	DCD	0xffffffd9

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@PDLLAHEA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAt?$AAo?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "h", 0x0, "a", 0x0, "n"
	DCB	0x0, "d", 0x0, "l", 0x0, "e", 0x0, " ", 0x0, "t", 0x0, "o"
	DCB	0x0, " ", 0x0, "'", 0x0, "%", 0x0, "s", 0x0, "'", 0x0, " "
	DCB	0x0, "i", 0x0, "s", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HG@BLPIKJJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAd?$AAo?$AAe?$AAs?$AAn?$AA?8?$AAt?$AA?5?$AAs?$AAu?$AAp?$AAp?$AAo?$AAr?$AAt?$AA?5?$AAa?$AAl?$AAl?$AA?5?$AAp?$AAo?$AAw@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "'", 0x0, "%", 0x0, "s"
	DCB	0x0, "'", 0x0, " ", 0x0, "d", 0x0, "o", 0x0, "e", 0x0, "s"
	DCB	0x0, "n", 0x0, "'", 0x0, "t", 0x0, " ", 0x0, "s", 0x0, "u"
	DCB	0x0, "p", 0x0, "p", 0x0, "o", 0x0, "r", 0x0, "t", 0x0, " "
	DCB	0x0, "a", 0x0, "l", 0x0, "l", 0x0, " ", 0x0, "p", 0x0, "o"
	DCB	0x0, "w", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "m", 0x0, "a"
	DCB	0x0, "n", 0x0, "a", 0x0, "g", 0x0, "e", 0x0, "r", 0x0, " "
	DCB	0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "d", 0x0, "e"
	DCB	0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FA@LMOJFAIF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI?$AA0?$AAx@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "C", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "t", 0x0, "e", 0x0, "D", 0x0, "C", 0x0, "("
	DCB	0x0, "'", 0x0, "%", 0x0, "s", 0x0, "'", 0x0, ")", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "(", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@KCHPFGBA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAA?$AAP?$AAI?$AA?5?$AAs?$AAe?$AAt?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAy?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "G", 0x0, "W", 0x0, "E"
	DCB	0x0, "S", 0x0, " ", 0x0, "A", 0x0, "P", 0x0, "I", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "t", 0x0, "s", 0x0, " ", 0x0, "a"
	DCB	0x0, "r", 0x0, "e", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "a"
	DCB	0x0, "d", 0x0, "y", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IO@GLEDLCJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAS?$AAi?$AAn?$AAg?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "W", 0x0, "a", 0x0, "i"
	DCB	0x0, "t", 0x0, "F", 0x0, "o", 0x0, "r", 0x0, "S", 0x0, "i"
	DCB	0x0, "n", 0x0, "g", 0x0, "l", 0x0, "e", 0x0, "O", 0x0, "b"
	DCB	0x0, "j", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "(", 0x0, ")"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "t", 0x0, "u", 0x0, "r"
	DCB	0x0, "n", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "(", 0x0, "e", 0x0, "r", 0x0, "r", 0x0, "o"
	DCB	0x0, "r", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, " "
	DCB	0x0, "o", 0x0, "n", 0x0, " ", 0x0, "G", 0x0, "W", 0x0, "E"
	DCB	0x0, "S", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "a", 0x0, "d"
	DCB	0x0, "y", 0x0, " ", 0x0, "e", 0x0, "v", 0x0, "e", 0x0, "n"
	DCB	0x0, "t", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@| DCB "O"
	DCB	0x0, "p", 0x0, "e", 0x0, "n", 0x0, "D", 0x0, "i", 0x0, "s"
	DCB	0x0, "p", 0x0, "l", 0x0, "a", 0x0, "y", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EK@KLGFKKGB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAw?$AAa?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAt?$AAo?$AA?5?$AAi?$AAn?$AAi?$AAt?$AAi?$AAa?$AAl?$AAi@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "w", 0x0, "a", 0x0, "i"
	DCB	0x0, "t", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "f"
	DCB	0x0, "o", 0x0, "r", 0x0, " ", 0x0, "G", 0x0, "W", 0x0, "E"
	DCB	0x0, "S", 0x0, " ", 0x0, "t", 0x0, "o", 0x0, " ", 0x0, "i"
	DCB	0x0, "n", 0x0, "i", 0x0, "t", 0x0, "i", 0x0, "a", 0x0, "l"
	DCB	0x0, "i", 0x0, "z", 0x0, "e", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmdisplay.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z| PROC ; OpenDisplayDevice

; 78   : {

  00000		 |$LN36@OpenDispla|
  00000	e92d 4ff0	 push        {r4-r11,lr}
  00004	f20d 0b1c	 addw        r11,sp,#0x1C
  00008	f000 f800	 bl          __security_push_cookie
  0000c	b086		 sub         sp,sp,#0x18
  0000e		 |$M34|

; 79   :     SETFNAME(_T("OpenDisplayDevice"));
; 80   :     HANDLE hRet = NULL;
; 81   : 
; 82   :     // Get a handle to the client device.  The client's name will generally be "DISPLAY" for 
; 83   :     // the default display, but it could be anything that CreateDC supports.
; 84   :     PREFAST_DEBUGCHK(gpfnCreateDCW != NULL);
; 85   :     PREFAST_DEBUGCHK(gpfnDeleteDC != NULL);
; 86   :     PREFAST_DEBUGCHK(gpfnExtEscape != NULL);
; 87   : 
; 88   :     // Make sure GWES is ready for us to access this device
; 89   :     if(!gfGwesReady) {

  0000e	f8df 8154	 ldr         r8,|$LN50@OpenDispla| ; =|gpfnCreateDCW|
  00012	4d4c		 ldr         r5,|$LN42@OpenDispla| ; =|dpCurSettings|
  00014	2600		 movs        r6,#0
  00016	f8d8 300c	 ldr         r3,[r8,#0xC]
  0001a	4682		 mov         r10,r0
  0001c	bb4b		 cbnz        r3,|$LN30@OpenDispla|

; 90   :         // We need to wait for GWES to finish -- since this is happening
; 91   :         // at boot time, we shouldn't have to wait for long.
; 92   :         PMLOGMSG(ZONE_INIT, (_T("%s: waiting for GWES to initialize\r\n"),
; 93   :             pszFname));

  0001e	f8d5 3440	 ldr         r3,[r5,#0x440]
  00022	f013 0f04	 tst         r3,#4
  00026	d003		 beq         |$LN14@OpenDispla|
  00028	484d		 ldr         r0,|$LN49@OpenDispla| ; =|??_C@_1EK@KLGFKKGB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAw?$AAa?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAt?$AAo?$AA?5?$AAi?$AAn?$AAi?$AAt?$AAi?$AAa?$AAl?$AAi@|
  0002a	4943		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  0002c	f000 f800	 bl          CeLogMsg
  00030		 |$LN14@OpenDispla|

; 94   :         DWORD dwStatus = WaitForAPIReady(SH_GDI, INFINITE);

  00030	f06f 0100	 mvn         r1,#0
  00034	2050		 movs        r0,#0x50
  00036	f000 f800	 bl          WaitForAPIReady

; 95   :         if(dwStatus != WAIT_OBJECT_0) {
; 96   :             PMLOGMSG(ZONE_WARN, 
; 97   :                 (_T("%s: WaitForSingleObject() returned %d (error %d) on GWES ready event\r\n"),
; 98   :                 pszFname, GetLastError()));

  0003a	f8d5 3440	 ldr         r3,[r5,#0x440]
  0003e	b150		 cbz         r0,|$LN10@OpenDispla|
  00040	f013 0f02	 tst         r3,#2
  00044	d011		 beq         |$LN31@OpenDispla|
  00046	f000 f800	 bl          GetLastError
  0004a	493b		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  0004c	4602		 mov         r2,r0
  0004e	4843		 ldr         r0,|$LN48@OpenDispla| ; =|??_C@_1IO@GLEDLCJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAS?$AAi?$AAn?$AAg?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn@|
  00050	f000 f800	 bl          CeLogMsg

; 99   :         } else {

  00054	e009		 b           |$LN31@OpenDispla|
  00056		 |$LN10@OpenDispla|

; 100  :             PMLOGMSG(ZONE_INIT, (_T("%s: GWES API sets are ready\r\n"), pszFname));

  00056	f013 0f04	 tst         r3,#4
  0005a	d003		 beq         |$LN18@OpenDispla|
  0005c	483e		 ldr         r0,|$LN47@OpenDispla| ; =|??_C@_1DM@KCHPFGBA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAA?$AAP?$AAI?$AA?5?$AAs?$AAe?$AAt?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAy?$AA?$AN?$AA?6?$AA?$AA@|
  0005e	4936		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00060	f000 f800	 bl          CeLogMsg
  00064		 |$LN18@OpenDispla|

; 101  :             // we don't need to access the event, but keep the handle value non-NULL
; 102  :             // in case more than one display registers itself
; 103  :             gfGwesReady = TRUE;

  00064	2301		 movs        r3,#1
  00066	f8c8 300c	 str         r3,[r8,#0xC]
  0006a		 |$LN31@OpenDispla|

; 104  :         }
; 105  :     }
; 106  : 
; 107  :     if(gfGwesReady) {

  0006a	f8d8 300c	 ldr         r3,[r8,#0xC]
  0006e	2b00		 cmp         r3,#0
  00070	d04d		 beq         |$LN32@OpenDispla|
  00072		 |$LN30@OpenDispla|

; 108  :         hRet = gpfnCreateDCW(pds->pszName, NULL, NULL, NULL);

  00072	f8da 0000	 ldr         r0,[r10]
  00076	f8d8 4000	 ldr         r4,[r8]
  0007a	2300		 movs        r3,#0
  0007c	2200		 movs        r2,#0
  0007e	2100		 movs        r1,#0
  00080	47a0		 blx         r4
  00082	4606		 mov         r6,r0

; 109  :         if(hRet == NULL) {

  00084	b9ae		 cbnz        r6,|$LN7@OpenDispla|

; 110  :             PMLOGMSG(ZONE_WARN || ZONE_IOCTL, (_T("%s: CreateDC('%s') failed %d (0x%08x)\r\n"), pszFname,
; 111  :                 pds->pszName, GetLastError(), GetLastError()));

  00086	f8d5 3440	 ldr         r3,[r5,#0x440]
  0008a	f013 0f02	 tst         r3,#2
  0008e	d102		 bne         |$LN20@OpenDispla|
  00090	f013 0f20	 tst         r3,#0x20
  00094	d039		 beq         |$LN21@OpenDispla|
  00096		 |$LN20@OpenDispla|
  00096	f000 f800	 bl          GetLastError
  0009a	4604		 mov         r4,r0
  0009c	f000 f800	 bl          GetLastError
  000a0	f8da 2000	 ldr         r2,[r10]
  000a4	4924		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  000a6	4603		 mov         r3,r0
  000a8	482a		 ldr         r0,|$LN46@OpenDispla| ; =|??_C@_1FA@LMOJFAIF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI?$AA0?$AAx@|
  000aa	9400		 str         r4,[sp]
  000ac	f000 f800	 bl          CeLogMsg

; 112  :             hRet = INVALID_HANDLE_VALUE;
; 113  :         } else {

  000b0	e02b		 b           |$LN21@OpenDispla|
  000b2		 |$LN7@OpenDispla|

; 114  :             // determine whether the display driver really supports the PM IOCTLs
; 115  :             DWORD dwIoctl[] = { IOCTL_POWER_CAPABILITIES, IOCTL_POWER_SET, IOCTL_POWER_GET };

  000b2	4b27		 ldr         r3,|$LN45@OpenDispla| ; =0x321000

; 116  :             int i;
; 117  :             for(i = 0; i < _countof(dwIoctl); i++) {

  000b4	2700		 movs        r7,#0
  000b6	f10d 0908	 add         r9,sp,#8
  000ba	9302		 str         r3,[sp,#8]
  000bc	4b23		 ldr         r3,|$LN44@OpenDispla| ; =0x321008
  000be	2500		 movs        r5,#0
  000c0	9303		 str         r3,[sp,#0xC]
  000c2	4b21		 ldr         r3,|$LN43@OpenDispla| ; =0x321004
  000c4	9304		 str         r3,[sp,#0x10]
  000c6		 |$LL5@OpenDispla|

; 118  :                 if(gpfnExtEscape((HDC) hRet, QUERYESCSUPPORT, sizeof(dwIoctl[i]), (LPCSTR) &dwIoctl[i], 0, NULL) <= 0) {

  000c6	f8d8 4008	 ldr         r4,[r8,#8]
  000ca	464b		 mov         r3,r9
  000cc	2204		 movs        r2,#4
  000ce	2108		 movs        r1,#8
  000d0	4630		 mov         r0,r6
  000d2	9501		 str         r5,[sp,#4]
  000d4	9500		 str         r5,[sp]
  000d6	47a0		 blx         r4
  000d8	2800		 cmp         r0,#0
  000da	dd04		 ble         |$LN27@OpenDispla|

; 116  :             int i;
; 117  :             for(i = 0; i < _countof(dwIoctl); i++) {

  000dc	3701		 adds        r7,#1
  000de	2f03		 cmp         r7,#3
  000e0	f109 0904	 add         r9,r9,#4
  000e4	d3ef		 bcc         |$LL5@OpenDispla|
  000e6		 |$LN27@OpenDispla|

; 119  :                     break;
; 120  :                 }
; 121  :             }
; 122  :             if(i < _countof(dwIoctl)) {

  000e6	4d17		 ldr         r5,|$LN42@OpenDispla| ; =|dpCurSettings|
  000e8	2f03		 cmp         r7,#3
  000ea	d210		 bcs         |$LN32@OpenDispla|

; 123  :                 PMLOGMSG(ZONE_WARN, (_T("%s: '%s' doesn't support all power manager control codes\r\n"),
; 124  :                     pszFname, pds->pszName));

  000ec	f8d5 3440	 ldr         r3,[r5,#0x440]
  000f0	f013 0f02	 tst         r3,#2
  000f4	d005		 beq         |$LN22@OpenDispla|
  000f6	f8da 2000	 ldr         r2,[r10]
  000fa	4811		 ldr         r0,|$LN41@OpenDispla| ; =|??_C@_1HG@BLPIKJJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAd?$AAo?$AAe?$AAs?$AAn?$AA?8?$AAt?$AA?5?$AAs?$AAu?$AAp?$AAp?$AAo?$AAr?$AAt?$AA?5?$AAa?$AAl?$AAl?$AA?5?$AAp?$AAo?$AAw@|
  000fc	490e		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  000fe	f000 f800	 bl          CeLogMsg
  00102		 |$LN22@OpenDispla|

; 125  :                 gpfnDeleteDC((HDC) hRet);

  00102	f8d8 3004	 ldr         r3,[r8,#4]
  00106	4630		 mov         r0,r6
  00108	4798		 blx         r3
  0010a		 |$LN21@OpenDispla|

; 126  :                 hRet = INVALID_HANDLE_VALUE;

  0010a	f06f 0600	 mvn         r6,#0
  0010e		 |$LN32@OpenDispla|

; 95   :         if(dwStatus != WAIT_OBJECT_0) {
; 96   :             PMLOGMSG(ZONE_WARN, 
; 97   :                 (_T("%s: WaitForSingleObject() returned %d (error %d) on GWES ready event\r\n"),
; 98   :                 pszFname, GetLastError()));

  0010e	f8d5 3440	 ldr         r3,[r5,#0x440]

; 127  :             }
; 128  :         }
; 129  :     }
; 130  :     
; 131  :     PMLOGMSG(ZONE_DEVICE || ZONE_IOCTL, (_T("%s: handle to '%s' is 0x%08x\r\n"), \
; 132  :         pszFname, pds->pszName, hRet));

  00112	f013 0f10	 tst         r3,#0x10
  00116	d102		 bne         |$LN24@OpenDispla|
  00118	f013 0f20	 tst         r3,#0x20
  0011c	d006		 beq         |$LN25@OpenDispla|
  0011e		 |$LN24@OpenDispla|
  0011e	f8da 2000	 ldr         r2,[r10]
  00122	4806		 ldr         r0,|$LN40@OpenDispla| ; =|??_C@_1DO@PDLLAHEA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAt?$AAo?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00124	4904		 ldr         r1,|$LN39@OpenDispla| ; =|??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  00126	4633		 mov         r3,r6
  00128	f000 f800	 bl          CeLogMsg
  0012c		 |$LN25@OpenDispla|

; 133  : 
; 134  :     return hRet;
; 135  : }

  0012c	4630		 mov         r0,r6
  0012e		 |$M37|
  0012e	b006		 add         sp,sp,#0x18
  00130	f000 f800	 bl          __security_pop_cookie
  00134	e8bd 8ff0	 pop         {r4-r11,pc}
  00138		 |$LN38@OpenDispla|
  00138		 |$LN39@OpenDispla|
  00138	0000 0000	 DCD         |??_C@_1CE@NLOFCKJG@?$AAO?$AAp?$AAe?$AAn?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AA?$AA@|
  0013c		 |$LN40@OpenDispla|
  0013c	0000 0000	 DCD         |??_C@_1DO@PDLLAHEA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAh?$AAa?$AAn?$AAd?$AAl?$AAe?$AA?5?$AAt?$AAo?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAi?$AAs?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$AN?$AA?6?$AA?$AA@|
  00140		 |$LN41@OpenDispla|
  00140	0000 0000	 DCD         |??_C@_1HG@BLPIKJJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?5?$AAd?$AAo?$AAe?$AAs?$AAn?$AA?8?$AAt?$AA?5?$AAs?$AAu?$AAp?$AAp?$AAo?$AAr?$AAt?$AA?5?$AAa?$AAl?$AAl?$AA?5?$AAp?$AAo?$AAw@|
  00144		 |$LN42@OpenDispla|
  00144	0000 0000	 DCD         |dpCurSettings|
  00148		 |$LN43@OpenDispla|
  00148	1004 0032	 DCD         0x321004
  0014c		 |$LN44@OpenDispla|
  0014c	1008 0032	 DCD         0x321008
  00150		 |$LN45@OpenDispla|
  00150	1000 0032	 DCD         0x321000
  00154		 |$LN46@OpenDispla|
  00154	0000 0000	 DCD         |??_C@_1FA@LMOJFAIF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AA?$CI?$AA?8?$AA?$CF?$AAs?$AA?8?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?$CI?$AA0?$AAx@|
  00158		 |$LN47@OpenDispla|
  00158	0000 0000	 DCD         |??_C@_1DM@KCHPFGBA@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAA?$AAP?$AAI?$AA?5?$AAs?$AAe?$AAt?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAr?$AAe?$AAa?$AAd?$AAy?$AA?$AN?$AA?6?$AA?$AA@|
  0015c		 |$LN48@OpenDispla|
  0015c	0000 0000	 DCD         |??_C@_1IO@GLEDLCJG@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAW?$AAa?$AAi?$AAt?$AAF?$AAo?$AAr?$AAS?$AAi?$AAn?$AAg?$AAl?$AAe?$AAO?$AAb?$AAj?$AAe?$AAc?$AAt?$AA?$CI?$AA?$CJ?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn@|
  00160		 |$LN49@OpenDispla|
  00160	0000 0000	 DCD         |??_C@_1EK@KLGFKKGB@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAw?$AAa?$AAi?$AAt?$AAi?$AAn?$AAg?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAG?$AAW?$AAE?$AAS?$AA?5?$AAt?$AAo?$AA?5?$AAi?$AAn?$AAi?$AAt?$AAi?$AAa?$AAl?$AAi@|
  00164		 |$LN50@OpenDispla|
  00164	0000 0000	 DCD         |gpfnCreateDCW|
  00168		 |$M35|

			 ENDP  ; |?OpenDisplayDevice@@YAPAXPAU_DeviceState_tag@@@Z|, OpenDisplayDevice

	EXPORT	|??_C@_1BI@CJKPFBEK@?$AAc?$AAo?$AAr?$AAe?$AAd?$AAl?$AAl?$AA?4?$AAd?$AAl?$AAl?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DM@EMCCGGJK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAL?$AAo?$AAa?$AAd?$AAL?$AAi?$AAb?$AAr?$AAa?$AAr?$AAy?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BE@IMLDAOJP@?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BC@GMBPGMN@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BE@JGEOLONK@?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1KG@HHIOCDCE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAg?$AAe?$AAt?$AA?5?$AAA?$AAP?$AAI?$AAs?$AA?3?$AA?5?$AAp?$AAf?$AAn?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CG@EPNLEKEF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|LoadLibraryW|
	IMPORT	|GetProcAddressW|
	IMPORT	|FreeLibrary|

  00000			 AREA	 |.pdata|, PDATA
|$pdata1$?InitDisplayDeviceInterface@@YAHXZ| DCD imagerel |$LN20@InitDispla|
	DCD	0xfd73614d

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CG@EPNLEKEF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "t"
	DCB	0x0, "u", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1KG@HHIOCDCE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAg?$AAe?$AAt?$AA?5?$AAA?$AAP?$AAI?$AAs?$AA?3?$AA?5?$AAp?$AAf?$AAn?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "c", 0x0, "a", 0x0, "n"
	DCB	0x0, "'", 0x0, "t", 0x0, " ", 0x0, "g", 0x0, "e", 0x0, "t"
	DCB	0x0, " ", 0x0, "A", 0x0, "P", 0x0, "I", 0x0, "s", 0x0, ":"
	DCB	0x0, " ", 0x0, "p", 0x0, "f", 0x0, "n", 0x0, "C", 0x0, "r"
	DCB	0x0, "e", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, "D", 0x0, "C"
	DCB	0x0, "W", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "p", 0x0, "f"
	DCB	0x0, "n", 0x0, "D", 0x0, "e", 0x0, "l", 0x0, "e", 0x0, "t"
	DCB	0x0, "e", 0x0, "D", 0x0, "C", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " "
	DCB	0x0, "p", 0x0, "f", 0x0, "n", 0x0, "E", 0x0, "x", 0x0, "t"
	DCB	0x0, "E", 0x0, "s", 0x0, "c", 0x0, "a", 0x0, "p", 0x0, "e"
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BE@JGEOLONK@?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW?$AA?$AA@| DCB "C"
	DCB	0x0, "r", 0x0, "e", 0x0, "a", 0x0, "t", 0x0, "e", 0x0, "D"
	DCB	0x0, "C", 0x0, "W", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BC@GMBPGMN@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$AA@| DCB "D"
	DCB	0x0, "e", 0x0, "l", 0x0, "e", 0x0, "t", 0x0, "e", 0x0, "D"
	DCB	0x0, "C", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BE@IMLDAOJP@?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$AA@| DCB "E"
	DCB	0x0, "x", 0x0, "t", 0x0, "E", 0x0, "s", 0x0, "c", 0x0, "a"
	DCB	0x0, "p", 0x0, "e", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@| DCB "I"
	DCB	0x0, "n", 0x0, "i", 0x0, "t", 0x0, "D", 0x0, "i", 0x0, "s"
	DCB	0x0, "p", 0x0, "l", 0x0, "a", 0x0, "y", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "n"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, "f", 0x0, "a", 0x0, "c"
	DCB	0x0, "e", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@EMCCGGJK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAL?$AAo?$AAa?$AAd?$AAL?$AAi?$AAb?$AAr?$AAa?$AAr?$AAy?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "%"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "L", 0x0, "o", 0x0, "a"
	DCB	0x0, "d", 0x0, "L", 0x0, "i", 0x0, "b", 0x0, "r", 0x0, "a"
	DCB	0x0, "r", 0x0, "y", 0x0, "(", 0x0, ")", 0x0, " ", 0x0, "f"
	DCB	0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BI@CJKPFBEK@?$AAc?$AAo?$AAr?$AAe?$AAd?$AAl?$AAl?$AA?4?$AAd?$AAl?$AAl?$AA?$AA@| DCB "c"
	DCB	0x0, "o", 0x0, "r", 0x0, "e", 0x0, "d", 0x0, "l", 0x0, "l"
	DCB	0x0, ".", 0x0, "d", 0x0, "l", 0x0, "l", 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogsp
; File c:\wince800\platform\rrm_ppc_windows\src\drivers\pm\mdd\pmdisplay.cpp

  00000			 AREA	 |.text|, CODE, THUMB

  00000		 |?InitDisplayDeviceInterface@@YAHXZ| PROC ; InitDisplayDeviceInterface

; 40   : {

  00000		 |$LN20@InitDispla|
  00000	e92d 48fc	 push        {r2-r7,r11,lr}
  00004	f20d 0b18	 addw        r11,sp,#0x18
  00008		 |$M18|

; 41   :     BOOL fOk = FALSE;
; 42   :     SETFNAME(_T("InitDisplayDeviceInterface"));
; 43   : 
; 44   :     if(gpfnCreateDCW == NULL) {

  00008	4d30		 ldr         r5,|$LN32@InitDispla| ; =|gpfnCreateDCW|
  0000a	4e2f		 ldr         r6,|$LN31@InitDispla| ; =|dpCurSettings|
  0000c	2400		 movs        r4,#0
  0000e	682b		 ldr         r3,[r5]
  00010	bbc3		 cbnz        r3,|$LN16@InitDispla|

; 45   :         HMODULE hmCore = (HMODULE) LoadLibrary(_T("coredll.dll"));

  00012	482c		 ldr         r0,|$LN30@InitDispla| ; =|??_C@_1BI@CJKPFBEK@?$AAc?$AAo?$AAr?$AAe?$AAd?$AAl?$AAl?$AA?4?$AAd?$AAl?$AAl?$AA?$AA@|
  00014	f000 f800	 bl          LoadLibraryW

; 46   :         PMLOGMSG(ZONE_WARN && hmCore == NULL, (_T("%s: LoadLibrary() failed %d\r\n"),
; 47   :             pszFname, GetLastError()));

  00018	f8d6 3440	 ldr         r3,[r6,#0x440]
  0001c	4607		 mov         r7,r0
  0001e	f013 0f02	 tst         r3,#2
  00022	d007		 beq         |$LN8@InitDispla|
  00024	b93f		 cbnz        r7,|$LN15@InitDispla|
  00026	f000 f800	 bl          GetLastError
  0002a	491f		 ldr         r1,|$LN23@InitDispla| ; =|??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@|
  0002c	4602		 mov         r2,r0
  0002e	4824		 ldr         r0,|$LN29@InitDispla| ; =|??_C@_1DM@EMCCGGJK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAL?$AAo?$AAa?$AAd?$AAL?$AAi?$AAb?$AAr?$AAa?$AAr?$AAy?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  00030	f000 f800	 bl          CeLogMsg
  00034		 |$LN8@InitDispla|

; 48   :         if(hmCore != NULL) {

  00034	b337		 cbz         r7,|$LN16@InitDispla|
  00036		 |$LN15@InitDispla|

; 49   :             // get procedure addresses
; 50   :             gpfnCreateDCW = (PFN_CreateDCW) GetProcAddress(hmCore, _T("CreateDCW"));

  00036	4921		 ldr         r1,|$LN28@InitDispla| ; =|??_C@_1BE@JGEOLONK@?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW?$AA?$AA@|
  00038	4638		 mov         r0,r7
  0003a	f000 f800	 bl          GetProcAddressW

; 51   :             gpfnDeleteDC = (PFN_DeleteDC) GetProcAddress(hmCore, _T("DeleteDC"));

  0003e	491e		 ldr         r1,|$LN27@InitDispla| ; =|??_C@_1BC@GMBPGMN@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$AA@|
  00040	6028		 str         r0,[r5]
  00042	4638		 mov         r0,r7
  00044	f000 f800	 bl          GetProcAddressW

; 52   :             gpfnExtEscape = (PFN_ExtEscape) GetProcAddress(hmCore, _T("ExtEscape"));

  00048	491a		 ldr         r1,|$LN26@InitDispla| ; =|??_C@_1BE@IMLDAOJP@?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$AA@|
  0004a	6068		 str         r0,[r5,#4]
  0004c	4638		 mov         r0,r7
  0004e	f000 f800	 bl          GetProcAddressW

; 53   :             if(gpfnCreateDCW == NULL || gpfnExtEscape == NULL || gpfnDeleteDC == NULL) {

  00052	682a		 ldr         r2,[r5]
  00054	686b		 ldr         r3,[r5,#4]
  00056	60a8		 str         r0,[r5,#8]
  00058	b11a		 cbz         r2,|$LN2@InitDispla|
  0005a	b110		 cbz         r0,|$LN2@InitDispla|
  0005c	b10b		 cbz         r3,|$LN2@InitDispla|

; 61   :             }
; 62   :             else
; 63   :             {
; 64   :                 fOk = TRUE;

  0005e	2401		 movs        r4,#1
  00060	e010		 b           |$LN16@InitDispla|
  00062		 |$LN2@InitDispla|

; 54   :                 PMLOGMSG(ZONE_WARN, 
; 55   :                     (_T("%s: can't get APIs: pfnCreateDCW 0x%08x, pfnDeleteDC 0x%08x, pfnExtEscape 0x%08x\r\n"),
; 56   :                     pszFname, gpfnCreateDCW, gpfnDeleteDC, gpfnExtEscape));

  00062	f8d6 1440	 ldr         r1,[r6,#0x440]
  00066	f011 0f02	 tst         r1,#2
  0006a	d004		 beq         |$LN10@InitDispla|
  0006c	490e		 ldr         r1,|$LN23@InitDispla| ; =|??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@|
  0006e	9000		 str         r0,[sp]
  00070	480f		 ldr         r0,|$LN25@InitDispla| ; =|??_C@_1KG@HHIOCDCE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAg?$AAe?$AAt?$AA?5?$AAA?$AAP?$AAI?$AAs?$AA?3?$AA?5?$AAp?$AAf?$AAn?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW@|
  00072	f000 f800	 bl          CeLogMsg
  00076		 |$LN10@InitDispla|

; 57   :                 gpfnCreateDCW = NULL;

  00076	2300		 movs        r3,#0

; 58   :                 gpfnDeleteDC = NULL;
; 59   :                 gpfnExtEscape = NULL;
; 60   :                 FreeLibrary(hmCore);

  00078	4638		 mov         r0,r7
  0007a	602b		 str         r3,[r5]
  0007c	606b		 str         r3,[r5,#4]
  0007e	60ab		 str         r3,[r5,#8]
  00080	f000 f800	 bl          FreeLibrary
  00084		 |$LN16@InitDispla|

; 65   :             }
; 66   :         }
; 67   :     }
; 68   :     
; 69   :     PMLOGMSG(ZONE_INIT || (ZONE_WARN && !fOk), (_T("%s: returning %d\r\n"), pszFname, fOk));

  00084	f8d6 3440	 ldr         r3,[r6,#0x440]
  00088	f013 0f04	 tst         r3,#4
  0008c	d103		 bne         |$LN13@InitDispla|
  0008e	f013 0f02	 tst         r3,#2
  00092	d005		 beq         |$LN14@InitDispla|
  00094	b924		 cbnz        r4,|$LN14@InitDispla|
  00096		 |$LN13@InitDispla|
  00096	4805		 ldr         r0,|$LN24@InitDispla| ; =|??_C@_1CG@EPNLEKEF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  00098	4903		 ldr         r1,|$LN23@InitDispla| ; =|??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@|
  0009a	4622		 mov         r2,r4
  0009c	f000 f800	 bl          CeLogMsg
  000a0		 |$LN14@InitDispla|

; 70   :     return fOk;
; 71   : }

  000a0	4620		 mov         r0,r4
  000a2		 |$M21|
  000a2	e8bd 88fc	 pop         {r2-r7,r11,pc}
  000a6		 |$LN33@InitDispla|
  000a6		 |$M34|
  000a6	defe		 __debugbreak
  000a8		 |$LN22@InitDispla|
  000a8		 |$LN23@InitDispla|
  000a8	0000 0000	 DCD         |??_C@_1DG@PGIPNLAG@?$AAI?$AAn?$AAi?$AAt?$AAD?$AAi?$AAs?$AAp?$AAl?$AAa?$AAy?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAf?$AAa?$AAc?$AAe?$AA?$AA@|
  000ac		 |$LN24@InitDispla|
  000ac	0000 0000	 DCD         |??_C@_1CG@EPNLEKEF@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAr?$AAe?$AAt?$AAu?$AAr?$AAn?$AAi?$AAn?$AAg?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000b0		 |$LN25@InitDispla|
  000b0	0000 0000	 DCD         |??_C@_1KG@HHIOCDCE@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAg?$AAe?$AAt?$AA?5?$AAA?$AAP?$AAI?$AAs?$AA?3?$AA?5?$AAp?$AAf?$AAn?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW@|
  000b4		 |$LN26@InitDispla|
  000b4	0000 0000	 DCD         |??_C@_1BE@IMLDAOJP@?$AAE?$AAx?$AAt?$AAE?$AAs?$AAc?$AAa?$AAp?$AAe?$AA?$AA@|
  000b8		 |$LN27@InitDispla|
  000b8	0000 0000	 DCD         |??_C@_1BC@GMBPGMN@?$AAD?$AAe?$AAl?$AAe?$AAt?$AAe?$AAD?$AAC?$AA?$AA@|
  000bc		 |$LN28@InitDispla|
  000bc	0000 0000	 DCD         |??_C@_1BE@JGEOLONK@?$AAC?$AAr?$AAe?$AAa?$AAt?$AAe?$AAD?$AAC?$AAW?$AA?$AA@|
  000c0		 |$LN29@InitDispla|
  000c0	0000 0000	 DCD         |??_C@_1DM@EMCCGGJK@?$AA?$CF?$AAs?$AA?3?$AA?5?$AAL?$AAo?$AAa?$AAd?$AAL?$AAi?$AAb?$AAr?$AAa?$AAr?$AAy?$AA?$CI?$AA?$CJ?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  000c4		 |$LN30@InitDispla|
  000c4	0000 0000	 DCD         |??_C@_1BI@CJKPFBEK@?$AAc?$AAo?$AAr?$AAe?$AAd?$AAl?$AAl?$AA?4?$AAd?$AAl?$AAl?$AA?$AA@|
  000c8		 |$LN31@InitDispla|
  000c8	0000 0000	 DCD         |dpCurSettings|
  000cc		 |$LN32@InitDispla|
  000cc	0000 0000	 DCD         |gpfnCreateDCW|
  000d0		 |$M19|

			 ENDP  ; |?InitDisplayDeviceInterface@@YAHXZ|, InitDisplayDeviceInterface

	END
